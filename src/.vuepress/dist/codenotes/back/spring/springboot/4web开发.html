<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://hwchen.top/codenotes/back/spring/springboot/4web%E5%BC%80%E5%8F%91.html"><meta property="og:site_name" content="Ahzy"><meta property="og:title" content="webå¼€å‘"><meta property="og:description" content="1ã€SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ Spring Boot provides auto-configuration for Spring MVC that works well with most applications.(å¤§å¤šåœºæ™¯æˆ‘ä»¬éƒ½æ— éœ€è‡ªå®šä¹‰é…ç½®) The auto-configuration adds the following featur..."><meta property="og:type" content="website"><meta property="og:image" content="https://gitee.com/private_crh/notes/raw/master/typora/202411070007342.png"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="springboot"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"webå¼€å‘","description":"1ã€SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ Spring Boot provides auto-configuration for Spring MVC that works well with most applications.(å¤§å¤šåœºæ™¯æˆ‘ä»¬éƒ½æ— éœ€è‡ªå®šä¹‰é…ç½®) The auto-configuration adds the following featur..."}</script><link rel="icon" href="/favicon.svg"><meta name="referrer" content="no-referrer"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/img/pwa/48.png" type="image/png" sizes="48x48"><link rel="icon" href="/img/pwa/72.png" type="image/png" sizes="72x72"><link rel="icon" href="/img/pwa/144.png" type="image/png" sizes="144x144"><link rel="icon" href="/img/pwa/192.png" type="image/png" sizes="192x192"><link rel="icon" href="/img/pwa/512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#af7ac5"><link rel="apple-touch-icon" href="/img/pwa/48.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/img/pwa/48.png"><meta name="msapplication-TileColor" content="#af7ac5"><link rel="alternate" type="application/atom+xml" href="https://hwchen.top/atom.xml" title="Ahzy Atom Feed"><link rel="alternate" type="application/json" href="https://hwchen.top/feed.json" title="Ahzy JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://hwchen.top/rss.xml" title="Ahzy RSS Feed"><title>webå¼€å‘ | Ahzy</title><meta name="description" content="1ã€SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ Spring Boot provides auto-configuration for Spring MVC that works well with most applications.(å¤§å¤šåœºæ™¯æˆ‘ä»¬éƒ½æ— éœ€è‡ªå®šä¹‰é…ç½®) The auto-configuration adds the following featur...">
    <link rel="preload" href="/assets/style-DKCFkj7Y.css" as="style"><link rel="stylesheet" href="/assets/style-DKCFkj7Y.css">
    <link rel="modulepreload" href="/assets/app-eWV4nnR8.js"><link rel="modulepreload" href="/assets/4webå¼€å‘.html-DWVgWjrA.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><!----><!----><span class="vp-site-name">Ahzy</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ğŸ“‘ å­¦ä¹ ç¬”è®°"><!--[--><!---->ğŸ“‘ å­¦ä¹ ç¬”è®°<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/codenotes/ui/" aria-label="å‰ç«¯"><!--[--><img class="icon" src="/icon/juanzhou2.svg" alt aria-hidden no-view style=""><!--]-->å‰ç«¯<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/codenotes/back/" aria-label="åç«¯"><!--[--><img class="icon" src="/icon/baodian.svg" alt aria-hidden no-view style=""><!--]-->åç«¯<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/codenotes/basic/" aria-label="å­¦ç§‘åŸºç¡€"><!--[--><img class="icon" src="/icon/book2.svg" alt aria-hidden no-view style=""><!--]-->å­¦ç§‘åŸºç¡€<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="â­ ä¸ªäººåšå®¢"><!--[--><!---->â­ ä¸ªäººåšå®¢<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">éšç¬”</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/floatinglife/iter/" aria-label="æ‹¾ Â· è®°"><!--[--><img class="icon" src="/icon/huiyi.svg" alt aria-hidden no-view style=""><!--]-->æ‹¾ Â· è®°<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/floatinglife/cooker/" aria-label="æ†© Â· è•¾"><!--[--><img class="icon" src="/icon/food.svg" alt aria-hidden no-view style=""><!--]-->æ†© Â· è•¾<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/floatinglife/thinker/" aria-label="ç¦… Â· æ€"><!--[--><img class="icon" src="/icon/dazuo.svg" alt aria-hidden no-view style=""><!--]-->ç¦… Â· æ€<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/floatinglife/feeling/" aria-label="é†‰ Â· ç¼˜"><!--[--><img class="icon" src="/icon/yezi.svg" alt aria-hidden no-view style=""><!--]-->é†‰ Â· ç¼˜<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">ç¢°å£</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/floatinglife/question/" aria-label="æƒ‘ Â· è§£"><!--[--><img class="icon" src="/icon/question.svg" alt aria-hidden no-view style=""><!--]-->æƒ‘ Â· è§£<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/floatinglife/tool/" aria-label="ç­‘ Â· ç´¯"><!--[--><img class="icon" src="/icon/shalou.svg" alt aria-hidden no-view style=""><!--]-->ç­‘ Â· ç´¯<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ–‡æ¡£"><!--[--><span class="font-icon icon iconfont icon-book" style=""></span>æ–‡æ¡£<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">å‰ç«¯æ–‡æ¡£</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://cn.vite.dev/" aria-label="Vite" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/vite.svg" alt aria-hidden no-view style=""><!--]-->Vite<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://cn.vuejs.org/" aria-label="Vue3" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/vue.svg" alt aria-hidden no-view style=""><!--]-->Vue3<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://router.vuejs.org/zh/" aria-label="Vue Router" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/vuerouter.svg" alt aria-hidden no-view style=""><!--]-->Vue Router<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://vueuse.org/" aria-label="VueUse" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/vueuse.svg" alt aria-hidden no-view style=""><!--]-->VueUse<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://cn.windicss.org/" aria-label="Windi CSS" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/windicss.svg" alt aria-hidden no-view style=""><!--]-->Windi CSS<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://element-plus.org/zh-CN/component/overview.html" aria-label="Element-Plus" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/elementplus.svg" alt aria-hidden no-view style=""><!--]-->Element-Plus<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://www.axios-http.cn/" aria-label="Axios" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/axios.svg" alt aria-hidden no-view style=""><!--]-->Axios<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">åç«¯æ–‡æ¡£</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://docs.oracle.com/javase/8/docs/api/index.html" aria-label="Java 8" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/java.svg" alt aria-hidden no-view style=""><!--]-->Java 8<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://tomcat.apache.org/tomcat-8.0-doc/servletapi/index.html" aria-label="Servlet" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/java.svg" alt aria-hidden no-view style=""><!--]-->Servlet<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://spring.io/" aria-label="Spring" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/spring.svg" alt aria-hidden no-view style=""><!--]-->Spring<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://docs.spring.io/spring-boot/index.html" aria-label="SpringBoot" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/springboot.svg" alt aria-hidden no-view style=""><!--]-->SpringBoot<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://spring.io/projects/spring-cloud" aria-label="SpringCloud" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/springcloud.svg" alt aria-hidden no-view style=""><!--]-->SpringCloud<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://git-scm.com/book/zh/v2" aria-label="Git" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/git.svg" alt aria-hidden no-view style=""><!--]-->Git<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://mybatis.p2hp.com/index.html" aria-label="Mybatis" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/mybatis.svg" alt aria-hidden no-view style=""><!--]-->Mybatis<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://baomidou.com/plugins/" aria-label="Mybatis-Plus" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/mybatisplus.svg" alt aria-hidden no-view style=""><!--]-->Mybatis-Plus<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://maven.org.cn/guides/index.html" aria-label="Maven" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/maven.svg" alt aria-hidden no-view style=""><!--]-->Maven<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://tomcat.apache.org/tomcat-10.0-doc/index.html" aria-label="Tomcat" rel="noopener noreferrer" target="_blank"><!--[--><img class="icon" src="/icon/tomcat.svg" alt aria-hidden no-view style=""><!--]-->Tomcat<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/info/web.html" aria-label="å…³äº"><!--[--><img class="icon" src="/icon/info.svg" alt aria-hidden no-view style=""><!--]-->å…³äº<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/icon/road.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">å­¦ä¹ è·¯çº¿</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/icon/javab.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">Javaæ ¸å¿ƒ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/icon/javaweb.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">JavaWeb</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="icon" src="/icon/spring.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">Springç”Ÿæ€</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/icon/spring.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">Spring</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/icon/springMVC.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">SpringMVC</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="icon" src="/icon/springboot.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">SpringBoot</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/codenotes/back/spring/springboot/1spring%E4%B8%8Espringboot.html" aria-label="ç»ªè®º"><!---->ç»ªè®º<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/codenotes/back/spring/springboot/2%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86.html" aria-label="è‡ªåŠ¨é…ç½®åŸç†"><!---->è‡ªåŠ¨é…ç½®åŸç†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/codenotes/back/spring/springboot/3%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html" aria-label="é…ç½®æ–‡ä»¶"><!---->é…ç½®æ–‡ä»¶<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/codenotes/back/spring/springboot/4web%E5%BC%80%E5%8F%91.html" aria-label="webå¼€å‘"><!---->webå¼€å‘<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/codenotes/back/spring/springboot/5%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE.html" aria-label="æ•°æ®è®¿é—®"><!---->æ•°æ®è®¿é—®<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/codenotes/back/spring/springboot/6%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html" aria-label="å•å…ƒæµ‹è¯•"><!---->å•å…ƒæµ‹è¯•<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/codenotes/back/spring/springboot/7%E6%8C%87%E6%A0%87%E7%9B%91%E6%8E%A7.html" aria-label="æŒ‡æ ‡ç›‘æ§"><!---->æŒ‡æ ‡ç›‘æ§<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/codenotes/back/spring/springboot/8%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90.html" aria-label="åŸç†è§£æ"><!---->åŸç†è§£æ<!----></a></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/icon/cengci.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">å¼€å‘æ¡†æ¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/icon/os.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">å¼€å‘å¿…å¤‡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/icon/database.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">æ•°æ®åº“</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/icon/algorithm.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">ç®—æ³•</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->webå¼€å‘</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://gitee.com/private_crh" target="_blank" rel="noopener noreferrer">Ahzy</a></span><span property="author" content="Ahzy"></span></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 29 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT29M"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_1ã€springmvcè‡ªåŠ¨é…ç½®æ¦‚è§ˆ">1ã€SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_2ã€ç®€å•åŠŸèƒ½åˆ†æ">2ã€ç®€å•åŠŸèƒ½åˆ†æ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-1ã€é™æ€èµ„æºè®¿é—®">2.1ã€é™æ€èµ„æºè®¿é—®</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€é™æ€èµ„æºç›®å½•">1ã€é™æ€èµ„æºç›®å½•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2ã€é™æ€èµ„æºè®¿é—®å‰ç¼€">2ã€é™æ€èµ„æºè®¿é—®å‰ç¼€</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3ã€webjar">3ã€webjar</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-2ã€æ¬¢è¿é¡µæ”¯æŒ">2.2ã€æ¬¢è¿é¡µæ”¯æŒ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-3ã€è‡ªå®šä¹‰-favicon">2.3ã€è‡ªå®šä¹‰ Favicon</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-4ã€é™æ€èµ„æºé…ç½®åŸç†">2.4ã€é™æ€èµ„æºé…ç½®åŸç†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_1ã€é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨">1ã€é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_2ã€èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™">2ã€èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3ã€æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™">3ã€æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_4ã€favicon">4ã€favicon</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_3ã€è¯·æ±‚å‚æ•°å¤„ç†">3ã€è¯·æ±‚å‚æ•°å¤„ç†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_0ã€è¯·æ±‚æ˜ å°„">0ã€è¯·æ±‚æ˜ å°„</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€restä½¿ç”¨ä¸åŸç†">1ã€restä½¿ç”¨ä¸åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2ã€è¯·æ±‚æ˜ å°„åŸç†">2ã€è¯·æ±‚æ˜ å°„åŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1ã€æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£">1ã€æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1ã€æ³¨è§£">1.1ã€æ³¨è§£ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2ã€servlet-api">1.2ã€Servlet APIï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3ã€å¤æ‚å‚æ•°">1.3ã€å¤æ‚å‚æ•°ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#"></a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#-1"></a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-4ã€è‡ªå®šä¹‰å¯¹è±¡å‚æ•°">1.4ã€è‡ªå®šä¹‰å¯¹è±¡å‚æ•°ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2ã€pojoå°è£…è¿‡ç¨‹">2ã€POJOå°è£…è¿‡ç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3ã€å‚æ•°å¤„ç†åŸç†">3ã€å‚æ•°å¤„ç†åŸç†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€handleradapter">1ã€HandlerAdapter</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2ã€æ‰§è¡Œç›®æ ‡æ–¹æ³•">2ã€æ‰§è¡Œç›®æ ‡æ–¹æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3ã€å‚æ•°è§£æå™¨-handlermethodargumentresolver">3ã€å‚æ•°è§£æå™¨-HandlerMethodArgumentResolver</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4ã€è¿”å›å€¼å¤„ç†å™¨">4ã€è¿”å›å€¼å¤„ç†å™¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5ã€å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼">5ã€å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_5-1ã€æŒ¨ä¸ªåˆ¤æ–­æ‰€æœ‰å‚æ•°è§£æå™¨é‚£ä¸ªæ”¯æŒè§£æè¿™ä¸ªå‚æ•°">5.1ã€æŒ¨ä¸ªåˆ¤æ–­æ‰€æœ‰å‚æ•°è§£æå™¨é‚£ä¸ªæ”¯æŒè§£æè¿™ä¸ªå‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_5-2ã€è§£æè¿™ä¸ªå‚æ•°çš„å€¼">5.2ã€è§£æè¿™ä¸ªå‚æ•°çš„å€¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_5-3ã€è‡ªå®šä¹‰ç±»å‹å‚æ•°-å°è£…pojo">5.3ã€è‡ªå®šä¹‰ç±»å‹å‚æ•° å°è£…POJO</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#-2"></a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#-3"></a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6ã€ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆ">6ã€ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7ã€å¤„ç†æ´¾å‘ç»“æœ">7ã€å¤„ç†æ´¾å‘ç»“æœ</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#-4"></a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#-5"></a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_4ã€æ•°æ®å“åº”ä¸å†…å®¹åå•†">4ã€æ•°æ®å“åº”ä¸å†…å®¹åå•†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1ã€å“åº”json">1ã€å“åº”JSON</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1ã€jackson-jar-responsebody">1.1ã€jackson.jar+@ResponseBody</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_1ã€è¿”å›å€¼è§£æå™¨">1ã€è¿”å›å€¼è§£æå™¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_2ã€è¿”å›å€¼è§£æå™¨åŸç†">2ã€è¿”å›å€¼è§£æå™¨åŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2ã€springmvcåˆ°åº•æ”¯æŒå“ªäº›è¿”å›å€¼">1.2ã€SpringMVCåˆ°åº•æ”¯æŒå“ªäº›è¿”å›å€¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3ã€httpmessageconverteråŸç†">1.3ã€HTTPMessageConverteråŸç†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_1ã€messageconverterè§„èŒƒ">1ã€MessageConverterè§„èŒƒ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_2ã€é»˜è®¤çš„messageconverter">2ã€é»˜è®¤çš„MessageConverter</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2ã€å†…å®¹åå•†">2ã€å†…å®¹åå•†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€å¼•å…¥xmlä¾èµ–">1ã€å¼•å…¥xmlä¾èµ–</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2ã€postmanåˆ†åˆ«æµ‹è¯•è¿”å›jsonå’Œxml">2ã€postmanåˆ†åˆ«æµ‹è¯•è¿”å›jsonå’Œxml</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3ã€å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½">3ã€å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4ã€å†…å®¹åå•†åŸç†">4ã€å†…å®¹åå•†åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5ã€è‡ªå®šä¹‰-messageconverter">5ã€è‡ªå®šä¹‰ MessageConverter</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_5ã€è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“">5ã€è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1ã€è§†å›¾è§£æ">1ã€è§†å›¾è§£æ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€è§†å›¾è§£æåŸç†æµç¨‹">1ã€è§†å›¾è§£æåŸç†æµç¨‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2ã€æ¨¡æ¿å¼•æ“-thymeleaf">2ã€æ¨¡æ¿å¼•æ“-Thymeleaf</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€thymeleafç®€ä»‹">1ã€thymeleafç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2ã€åŸºæœ¬è¯­æ³•">2ã€åŸºæœ¬è¯­æ³•</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_1ã€è¡¨è¾¾å¼">1ã€è¡¨è¾¾å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_2ã€å­—é¢é‡">2ã€å­—é¢é‡</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3ã€æ–‡æœ¬æ“ä½œ">3ã€æ–‡æœ¬æ“ä½œ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_4ã€æ•°å­¦è¿ç®—">4ã€æ•°å­¦è¿ç®—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_5ã€å¸ƒå°”è¿ç®—">5ã€å¸ƒå°”è¿ç®—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_6ã€æ¯”è¾ƒè¿ç®—">6ã€æ¯”è¾ƒè¿ç®—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_7ã€æ¡ä»¶è¿ç®—">7ã€æ¡ä»¶è¿ç®—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_8ã€ç‰¹æ®Šæ“ä½œ">8ã€ç‰¹æ®Šæ“ä½œ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3ã€è®¾ç½®å±æ€§å€¼-th-attr">3ã€è®¾ç½®å±æ€§å€¼-th:attr</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4ã€è¿­ä»£">4ã€è¿­ä»£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5ã€æ¡ä»¶è¿ç®—">5ã€æ¡ä»¶è¿ç®—</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#-6"></a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6ã€å±æ€§ä¼˜å…ˆçº§">6ã€å±æ€§ä¼˜å…ˆçº§</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#-7"></a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3ã€thymeleafä½¿ç”¨">3ã€thymeleafä½¿ç”¨</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_1ã€å¼•å…¥starter">1ã€å¼•å…¥Starter</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_2ã€è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf">2ã€è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#-8"></a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3ã€é¡µé¢å¼€å‘">3ã€é¡µé¢å¼€å‘</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4ã€æ„å»ºåå°ç®¡ç†ç³»ç»Ÿ">4ã€æ„å»ºåå°ç®¡ç†ç³»ç»Ÿ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€é¡¹ç›®åˆ›å»º">1ã€é¡¹ç›®åˆ›å»º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2ã€é™æ€èµ„æºå¤„ç†">2ã€é™æ€èµ„æºå¤„ç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3ã€è·¯å¾„æ„å»º">3ã€è·¯å¾„æ„å»º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4ã€æ¨¡æ¿æŠ½å–">4ã€æ¨¡æ¿æŠ½å–</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5ã€é¡µé¢è·³è½¬">5ã€é¡µé¢è·³è½¬</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6ã€æ•°æ®æ¸²æŸ“">6ã€æ•°æ®æ¸²æŸ“</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_6ã€æ‹¦æˆªå™¨">6ã€æ‹¦æˆªå™¨</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1ã€handlerinterceptor-æ¥å£">1ã€HandlerInterceptor æ¥å£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2ã€é…ç½®æ‹¦æˆªå™¨">2ã€é…ç½®æ‹¦æˆªå™¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3ã€æ‹¦æˆªå™¨åŸç†">3ã€æ‹¦æˆªå™¨åŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_7ã€æ–‡ä»¶ä¸Šä¼ ">7ã€æ–‡ä»¶ä¸Šä¼ </a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1ã€é¡µé¢è¡¨å•">1ã€é¡µé¢è¡¨å•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2ã€æ–‡ä»¶ä¸Šä¼ ä»£ç ">2ã€æ–‡ä»¶ä¸Šä¼ ä»£ç </a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3ã€è‡ªåŠ¨é…ç½®åŸç†">3ã€è‡ªåŠ¨é…ç½®åŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_8ã€å¼‚å¸¸å¤„ç†">8ã€å¼‚å¸¸å¤„ç†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1ã€é”™è¯¯å¤„ç†">1ã€é”™è¯¯å¤„ç†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_1ã€é»˜è®¤è§„åˆ™">1ã€é»˜è®¤è§„åˆ™</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_2ã€å®šåˆ¶é”™è¯¯å¤„ç†é€»è¾‘">2ã€å®šåˆ¶é”™è¯¯å¤„ç†é€»è¾‘</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_3ã€å¼‚å¸¸å¤„ç†è‡ªåŠ¨é…ç½®åŸç†">3ã€å¼‚å¸¸å¤„ç†è‡ªåŠ¨é…ç½®åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#_4ã€å¼‚å¸¸å¤„ç†æ­¥éª¤æµç¨‹">4ã€å¼‚å¸¸å¤„ç†æ­¥éª¤æµç¨‹</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_9ã€webåŸç”Ÿç»„ä»¶æ³¨å…¥-servletã€filterã€listener">9ã€WebåŸç”Ÿç»„ä»¶æ³¨å…¥ï¼ˆServletã€Filterã€Listenerï¼‰</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1ã€ä½¿ç”¨servlet-api">1ã€ä½¿ç”¨Servlet API</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2ã€ä½¿ç”¨registrationbean">2ã€ä½¿ç”¨RegistrationBean</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_10ã€åµŒå…¥å¼servletå®¹å™¨">10ã€åµŒå…¥å¼Servletå®¹å™¨</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1ã€åˆ‡æ¢åµŒå…¥å¼servletå®¹å™¨">1ã€åˆ‡æ¢åµŒå…¥å¼Servletå®¹å™¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2ã€å®šåˆ¶servletå®¹å™¨">2ã€å®šåˆ¶Servletå®¹å™¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level1" href="#_11ã€å®šåˆ¶åŒ–åŸç†">11ã€å®šåˆ¶åŒ–åŸç†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1ã€å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼">1ã€å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2ã€åŸç†åˆ†æå¥—è·¯">2ã€åŸç†åˆ†æå¥—è·¯</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007342.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="_1ã€springmvcè‡ªåŠ¨é…ç½®æ¦‚è§ˆ" tabindex="-1"><a class="header-anchor" href="#_1ã€springmvcè‡ªåŠ¨é…ç½®æ¦‚è§ˆ"><span>1ã€SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ</span></a></h1><p>Spring Boot provides auto-configuration for Spring MVC that <strong>works well with most applications.(å¤§å¤šåœºæ™¯æˆ‘ä»¬éƒ½æ— éœ€è‡ªå®šä¹‰é…ç½®)</strong></p><p>The auto-configuration adds the following features on top of Springâ€™s defaults:</p><ul><li><p>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</p></li><li><ul><li>å†…å®¹åå•†è§†å›¾è§£æå™¨å’ŒBeanNameè§†å›¾è§£æå™¨</li></ul></li><li><p>Support for serving static resources, including support for WebJars (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-static-content" target="_blank" rel="noopener noreferrer">later in this document</a>)).</p></li><li><ul><li>é™æ€èµ„æºï¼ˆåŒ…æ‹¬webjarsï¼‰</li></ul></li><li><p>Automatic registration of <code>Converter</code>, <code>GenericConverter</code>, and <code>Formatter</code> beans.</p></li><li><ul><li>è‡ªåŠ¨æ³¨å†Œ <code>Converterï¼ŒGenericConverterï¼ŒFormatter </code></li></ul></li><li><p>Support for <code>HttpMessageConverters</code> (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-message-converters" target="_blank" rel="noopener noreferrer">later in this document</a>).</p></li><li><ul><li>æ”¯æŒ <code>HttpMessageConverters</code> ï¼ˆåæ¥æˆ‘ä»¬é…åˆå†…å®¹åå•†ç†è§£åŸç†ï¼‰</li></ul></li><li><p>Automatic registration of <code>MessageCodesResolver</code> (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-message-codes" target="_blank" rel="noopener noreferrer">later in this document</a>).</p></li><li><ul><li>è‡ªåŠ¨æ³¨å†Œ <code>MessageCodesResolver</code> ï¼ˆå›½é™…åŒ–ç”¨ï¼‰</li></ul></li><li><p>Static <code>index.html</code> support.</p></li><li><ul><li>é™æ€index.html é¡µæ”¯æŒ</li></ul></li><li><p>Custom <code>Favicon</code> support (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-favicon" target="_blank" rel="noopener noreferrer">later in this document</a>).</p></li><li><ul><li>è‡ªå®šä¹‰ <code>Favicon</code></li></ul></li><li><p>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-web-binding-initializer" target="_blank" rel="noopener noreferrer">later in this document</a>).</p></li><li><ul><li>è‡ªåŠ¨ä½¿ç”¨ <code>ConfigurableWebBindingInitializer</code> ï¼Œï¼ˆDataBinderè´Ÿè´£å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ°JavaBeanä¸Šï¼‰</li></ul></li></ul><p>If you want to keep those Spring Boot MVC customizations and make more <a href="https://docs.spring.io/spring/docs/5.2.9.RELEASE/spring-framework-reference/web.html#mvc" target="_blank" rel="noopener noreferrer">MVC customizations</a> (interceptors, formatters, view controllers, and other features), you can add your own <code>@Configuration</code> class of type <code>WebMvcConfigurer</code> but <strong>without</strong> <code>@EnableWebMvc</code>.</p><p><strong>ä¸ç”¨@EnableWebMvcæ³¨è§£ã€‚ä½¿ç”¨</strong> <code>**@Configuration**</code> <strong>+</strong> <code>**WebMvcConfigurer**</code> <strong>è‡ªå®šä¹‰è§„åˆ™</strong></p><p>If you want to provide custom instances of <code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code>, or <code>ExceptionHandlerExceptionResolver</code>, and still keep the Spring Boot MVC customizations, you can declare a bean of type <code>WebMvcRegistrations</code> and use it to provide custom instances of those components.</p><p><strong>å£°æ˜</strong> <code>**WebMvcRegistrations**</code> <strong>æ”¹å˜é»˜è®¤åº•å±‚ç»„ä»¶</strong></p><p>If you want to take complete control of Spring MVC, you can add your own <code>@Configuration</code> annotated with <code>@EnableWebMvc</code>, or alternatively add your own <code>@Configuration</code>-annotated <code>DelegatingWebMvcConfiguration</code> as described in the Javadoc of <code>@EnableWebMvc</code>.</p><p><strong>ä½¿ç”¨</strong> <code>**@EnableWebMvc+@Configuration+DelegatingWebMvcConfiguration å…¨é¢æ¥ç®¡SpringMVC**</code></p><h1 id="_2ã€ç®€å•åŠŸèƒ½åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_2ã€ç®€å•åŠŸèƒ½åˆ†æ"><span>2ã€ç®€å•åŠŸèƒ½åˆ†æ</span></a></h1><h2 id="_2-1ã€é™æ€èµ„æºè®¿é—®" tabindex="-1"><a class="header-anchor" href="#_2-1ã€é™æ€èµ„æºè®¿é—®"><span>2.1ã€é™æ€èµ„æºè®¿é—®</span></a></h2><h3 id="_1ã€é™æ€èµ„æºç›®å½•" tabindex="-1"><a class="header-anchor" href="#_1ã€é™æ€èµ„æºç›®å½•"><span>1ã€é™æ€èµ„æºç›®å½•</span></a></h3><p>åªè¦é™æ€èµ„æºæ”¾åœ¨ç±»è·¯å¾„ä¸‹ï¼š called <code>/static</code> (or <code>/public</code> or <code>/resources</code> or <code>/META-INF/resources</code></p><p>è®¿é—® ï¼š å½“å‰é¡¹ç›®æ ¹è·¯å¾„/ + é™æ€èµ„æºå</p><p>åŸç†ï¼š é™æ€æ˜ å°„/**ã€‚</p><p>è¯·æ±‚è¿›æ¥ï¼Œå…ˆå»æ‰¾Controllerçœ‹èƒ½ä¸èƒ½å¤„ç†ã€‚ä¸èƒ½å¤„ç†çš„æ‰€æœ‰è¯·æ±‚åˆéƒ½äº¤ç»™é™æ€èµ„æºå¤„ç†å™¨ã€‚é™æ€èµ„æºä¹Ÿæ‰¾ä¸åˆ°åˆ™å“åº”404é¡µé¢</p><p>æ”¹å˜é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">mvc</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /res/<span class="token important">**</span></span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">resources</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span>/haha/<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€é™æ€èµ„æºè®¿é—®å‰ç¼€" tabindex="-1"><a class="header-anchor" href="#_2ã€é™æ€èµ„æºè®¿é—®å‰ç¼€"><span>2ã€é™æ€èµ„æºè®¿é—®å‰ç¼€</span></a></h3><p>é»˜è®¤æ— å‰ç¼€</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">mvc</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /res/<span class="token important">**</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“å‰é¡¹ç›® + static-path-pattern + é™æ€èµ„æºå = é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾</p><h3 id="_3ã€webjar" tabindex="-1"><a class="header-anchor" href="#_3ã€webjar"><span>3ã€webjar</span></a></h3><p>è‡ªåŠ¨æ˜ å°„ /<a href="http://localhost:8080/webjars/jquery/3.5.1/jquery.js" target="_blank" rel="noopener noreferrer">webjars</a>/**</p><p>https://www.webjars.org/</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.webjars<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jquery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¿é—®åœ°å€ï¼š<a href="http://localhost:8080/webjars/jquery/3.5.1/jquery.js" target="_blank" rel="noopener noreferrer">http://localhost:8080/webjars/<strong>jquery/3.5.1/jquery.js</strong></a> åé¢åœ°å€è¦æŒ‰ç…§ä¾èµ–é‡Œé¢çš„åŒ…è·¯å¾„</p><h2 id="_2-2ã€æ¬¢è¿é¡µæ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#_2-2ã€æ¬¢è¿é¡µæ”¯æŒ"><span>2.2ã€æ¬¢è¿é¡µæ”¯æŒ</span></a></h2><ul><li><p>é™æ€èµ„æºè·¯å¾„ä¸‹ index.html</p></li><li><ul><li>å¯ä»¥é…ç½®é™æ€èµ„æºè·¯å¾„</li><li>ä½†æ˜¯ä¸å¯ä»¥é…ç½®é™æ€èµ„æºçš„è®¿é—®å‰ç¼€ã€‚å¦åˆ™å¯¼è‡´ index.htmlä¸èƒ½è¢«é»˜è®¤è®¿é—®</li></ul></li></ul><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line"><span class="token comment">#  mvc:</span></span>
<span class="line"><span class="token comment">#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´welcome pageåŠŸèƒ½å¤±æ•ˆ</span></span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">resources</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span>/haha/<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>controllerèƒ½å¤„ç†/index</li></ul><h2 id="_2-3ã€è‡ªå®šä¹‰-favicon" tabindex="-1"><a class="header-anchor" href="#_2-3ã€è‡ªå®šä¹‰-favicon"><span>2.3ã€è‡ªå®šä¹‰ <code>Favicon</code></span></a></h2><p>favicon.ico æ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹å³å¯ã€‚</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line"><span class="token comment">#  mvc:</span></span>
<span class="line"><span class="token comment">#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´ Favicon åŠŸèƒ½å¤±æ•ˆ</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-4ã€é™æ€èµ„æºé…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#_2-4ã€é™æ€èµ„æºé…ç½®åŸç†"><span>2.4ã€é™æ€èµ„æºé…ç½®åŸç†</span></a></h2><ul><li>SpringBootå¯åŠ¨é»˜è®¤åŠ è½½ xxxAutoConfiguration ç±»ï¼ˆè‡ªåŠ¨é…ç½®ç±»ï¼‰</li><li>SpringMVCåŠŸèƒ½çš„è‡ªåŠ¨é…ç½®ç±» WebMvcAutoConfigurationï¼Œç”Ÿæ•ˆ</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span><span class="token constant">SERVLET</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">WebMvcConfigurationSupport</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span><span class="token constant">HIGHEST_PRECEDENCE</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">DispatcherServletAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">TaskExecutionAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token class-name">ValidationAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfiguration</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç»™å®¹å™¨ä¸­é…äº†ä»€ä¹ˆã€‚</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">	<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">EnableWebMvcConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">WebMvcProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">ResourceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfigurationAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é…ç½®æ–‡ä»¶çš„ç›¸å…³å±æ€§å’Œxxxè¿›è¡Œäº†ç»‘å®šã€‚WebMvcProperties=<strong>spring.mvc</strong>ã€ResourceProperties=<strong>spring.resources</strong></li></ul><h4 id="_1ã€é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨" tabindex="-1"><a class="header-anchor" href="#_1ã€é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨"><span>1ã€é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨</span></a></h4><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line">	<span class="token comment">//æœ‰å‚æ„é€ å™¨æ‰€æœ‰å‚æ•°çš„å€¼éƒ½ä¼šä»å®¹å™¨ä¸­ç¡®å®š</span></span>
<span class="line"><span class="token comment">//ResourceProperties resourcePropertiesï¼›è·å–å’Œspring.resourcesç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡</span></span>
<span class="line"><span class="token comment">//WebMvcProperties mvcProperties è·å–å’Œspring.mvcç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡</span></span>
<span class="line"><span class="token comment">//ListableBeanFactory beanFactory Springçš„beanFactory</span></span>
<span class="line"><span class="token comment">//HttpMessageConverters æ‰¾åˆ°æ‰€æœ‰çš„HttpMessageConverters</span></span>
<span class="line"><span class="token comment">//ResourceHandlerRegistrationCustomizer æ‰¾åˆ° èµ„æºå¤„ç†å™¨çš„è‡ªå®šä¹‰å™¨ã€‚=========</span></span>
<span class="line"><span class="token comment">//DispatcherServletPath  </span></span>
<span class="line"><span class="token comment">//ServletRegistrationBean   ç»™åº”ç”¨æ³¨å†ŒServletã€Filter....</span></span>
<span class="line">	<span class="token keyword">public</span> <span class="token class-name">WebMvcAutoConfigurationAdapter</span><span class="token punctuation">(</span><span class="token class-name">ResourceProperties</span> resourceProperties<span class="token punctuation">,</span> <span class="token class-name">WebMvcProperties</span> mvcProperties<span class="token punctuation">,</span></span>
<span class="line">				<span class="token class-name">ListableBeanFactory</span> beanFactory<span class="token punctuation">,</span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HttpMessageConverters</span><span class="token punctuation">&gt;</span></span> messageConvertersProvider<span class="token punctuation">,</span></span>
<span class="line">				<span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResourceHandlerRegistrationCustomizer</span><span class="token punctuation">&gt;</span></span> resourceHandlerRegistrationCustomizerProvider<span class="token punctuation">,</span></span>
<span class="line">				<span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DispatcherServletPath</span><span class="token punctuation">&gt;</span></span> dispatcherServletPath<span class="token punctuation">,</span></span>
<span class="line">				<span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> servletRegistrations<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties <span class="token operator">=</span> resourceProperties<span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties <span class="token operator">=</span> mvcProperties<span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory <span class="token operator">=</span> beanFactory<span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">this</span><span class="token punctuation">.</span>messageConvertersProvider <span class="token operator">=</span> messageConvertersProvider<span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">this</span><span class="token punctuation">.</span>resourceHandlerRegistrationCustomizer <span class="token operator">=</span> resourceHandlerRegistrationCustomizerProvider<span class="token punctuation">.</span><span class="token function">getIfAvailable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">this</span><span class="token punctuation">.</span>dispatcherServletPath <span class="token operator">=</span> dispatcherServletPath<span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">this</span><span class="token punctuation">.</span>servletRegistrations <span class="token operator">=</span> servletRegistrations<span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h4 id="_2ã€èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_2ã€èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™"><span>2ã€èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™</span></a></h4><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token annotation punctuation">@Override</span></span>
<span class="line">		<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">isAddMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Default resource handling disabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token class-name">Duration</span> cachePeriod <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPeriod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token class-name">CacheControl</span> cacheControl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCachecontrol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHttpCacheControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token comment">//webjarsçš„è§„åˆ™</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>registry<span class="token punctuation">.</span><span class="token function">hasMappingForPattern</span><span class="token punctuation">(</span><span class="token string">&quot;/webjars/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token function">customizeResourceHandlerRegistration</span><span class="token punctuation">(</span>registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/webjars/**&quot;</span><span class="token punctuation">)</span></span>
<span class="line">						<span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:/META-INF/resources/webjars/&quot;</span><span class="token punctuation">)</span></span>
<span class="line">						<span class="token punctuation">.</span><span class="token function">setCachePeriod</span><span class="token punctuation">(</span><span class="token function">getSeconds</span><span class="token punctuation">(</span>cachePeriod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span>cacheControl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">            </span>
<span class="line">            <span class="token comment">//</span></span>
<span class="line">			<span class="token class-name">String</span> staticPathPattern <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>registry<span class="token punctuation">.</span><span class="token function">hasMappingForPattern</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token function">customizeResourceHandlerRegistration</span><span class="token punctuation">(</span>registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span></span>
<span class="line">						<span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token function">getResourceLocations</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">						<span class="token punctuation">.</span><span class="token function">setCachePeriod</span><span class="token punctuation">(</span><span class="token function">getSeconds</span><span class="token punctuation">(</span>cachePeriod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span>cacheControl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">spring<span class="token operator">:</span></span>
<span class="line">#  mvc<span class="token operator">:</span></span>
<span class="line">#    <span class="token keyword">static</span><span class="token operator">-</span>path<span class="token operator">-</span>pattern<span class="token operator">:</span> <span class="token operator">/</span>res<span class="token doc-comment comment">/**</span>
<span class="line"></span>
<span class="line">  resources:</span>
<span class="line">    add-mappings: false   ç¦ç”¨æ‰€æœ‰é™æ€èµ„æºè§„åˆ™</span>
<span class="line">@ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false)</span>
<span class="line">public class ResourceProperties <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">	private static final String[] CLASSPATH_RESOURCE_LOCATIONS = <span class="token punctuation">{</span> &quot;classpath:/META-INF/resources/&quot;,</span>
<span class="line">			&quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; <span class="token punctuation">}</span>;</span>
<span class="line"></span>
<span class="line">	/**</span>
<span class="line">	 * Locations of static resources. Defaults to classpath:[/META-INF/resources/,</span>
<span class="line">	 * /resources/, /static/, /public/].</span>
<span class="line">	 */</span></span>
<span class="line">	<span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> staticLocations <span class="token operator">=</span> <span class="token constant">CLASSPATH_RESOURCE_LOCATIONS</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h4 id="_3ã€æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_3ã€æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™"><span>3ã€æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™</span></a></h4><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line">	<span class="token class-name">HandlerMapping</span>ï¼šå¤„ç†å™¨æ˜ å°„ã€‚ä¿å­˜äº†æ¯ä¸€ä¸ª<span class="token class-name">Handler</span>èƒ½å¤„ç†å“ªäº›è¯·æ±‚ã€‚	</span>
<span class="line"></span>
<span class="line">	<span class="token annotation punctuation">@Bean</span></span>
<span class="line">		<span class="token keyword">public</span> <span class="token class-name">WelcomePageHandlerMapping</span> <span class="token function">welcomePageHandlerMapping</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span></span>
<span class="line">				<span class="token class-name">FormattingConversionService</span> mvcConversionService<span class="token punctuation">,</span> <span class="token class-name">ResourceUrlProvider</span> mvcResourceUrlProvider<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token class-name">WelcomePageHandlerMapping</span> welcomePageHandlerMapping <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WelcomePageHandlerMapping</span><span class="token punctuation">(</span></span>
<span class="line">					<span class="token keyword">new</span> <span class="token class-name">TemplateAvailabilityProviders</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">,</span> applicationContext<span class="token punctuation">,</span> <span class="token function">getWelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">					<span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setInterceptors</span><span class="token punctuation">(</span><span class="token function">getInterceptors</span><span class="token punctuation">(</span>mvcConversionService<span class="token punctuation">,</span> mvcResourceUrlProvider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setCorsConfigurations</span><span class="token punctuation">(</span><span class="token function">getCorsConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">return</span> welcomePageHandlerMapping<span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token class-name">WelcomePageHandlerMapping</span><span class="token punctuation">(</span><span class="token class-name">TemplateAvailabilityProviders</span> templateAvailabilityProviders<span class="token punctuation">,</span></span>
<span class="line">			<span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">&gt;</span></span> welcomePage<span class="token punctuation">,</span> <span class="token class-name">String</span> staticPathPattern<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>welcomePage<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;/**&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">//è¦ç”¨æ¬¢è¿é¡µåŠŸèƒ½ï¼Œå¿…é¡»æ˜¯/**</span></span>
<span class="line">			logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Adding welcome page: &quot;</span> <span class="token operator">+</span> welcomePage<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token function">setRootViewName</span><span class="token punctuation">(</span><span class="token string">&quot;forward:index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">welcomeTemplateExists</span><span class="token punctuation">(</span>templateAvailabilityProviders<span class="token punctuation">,</span> applicationContext<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// è°ƒç”¨Controller  /index</span></span>
<span class="line">			logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Adding welcome page template: index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token function">setRootViewName</span><span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h4 id="_4ã€favicon" tabindex="-1"><a class="header-anchor" href="#_4ã€favicon"><span>4ã€favicon</span></a></h4><h1 id="_3ã€è¯·æ±‚å‚æ•°å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_3ã€è¯·æ±‚å‚æ•°å¤„ç†"><span>3ã€è¯·æ±‚å‚æ•°å¤„ç†</span></a></h1><h2 id="_0ã€è¯·æ±‚æ˜ å°„" tabindex="-1"><a class="header-anchor" href="#_0ã€è¯·æ±‚æ˜ å°„"><span>0ã€è¯·æ±‚æ˜ å°„</span></a></h2><h3 id="_1ã€restä½¿ç”¨ä¸åŸç†" tabindex="-1"><a class="header-anchor" href="#_1ã€restä½¿ç”¨ä¸åŸç†"><span>1ã€restä½¿ç”¨ä¸åŸç†</span></a></h3><ul><li><p>@xxxMappingï¼›</p></li><li><p>Resté£æ ¼æ”¯æŒï¼ˆ<em>ä½¿ç”¨<strong>HTTP</strong>è¯·æ±‚æ–¹å¼åŠ¨è¯æ¥è¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œ</em>ï¼‰</p></li><li><ul><li><em>ä»¥å‰ï¼š**/getUser</em> <em>è·å–ç”¨æˆ·</em> <em>/deleteUser</em> <em>åˆ é™¤ç”¨æˆ·</em> <em>/editUser</em> <em>ä¿®æ”¹ç”¨æˆ·</em> <em>/saveUser</em> <em>ä¿å­˜ç”¨æˆ·</em></li><li><em>ç°åœ¨ï¼š /user</em> *GET-*<em>è·å–ç”¨æˆ·</em> *DELETE-*<em>åˆ é™¤ç”¨æˆ·</em> *PUT-*<em>ä¿®æ”¹ç”¨æˆ·</em> *POST-*<em>ä¿å­˜ç”¨æˆ·</em></li><li>æ ¸å¿ƒFilterï¼›HiddenHttpMethodFilter</li></ul></li><li><ul><li><ul><li>ç”¨æ³•ï¼š è¡¨å•method=postï¼Œéšè—åŸŸ _method=put</li><li>SpringBootä¸­æ‰‹åŠ¨å¼€å¯</li></ul></li></ul></li><li><ul><li>æ‰©å±•ï¼šå¦‚ä½•æŠŠ_method è¿™ä¸ªåå­—æ¢æˆæˆ‘ä»¬è‡ªå·±å–œæ¬¢çš„ã€‚</li></ul></li></ul><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line">    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;GET-å¼ ä¸‰&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;POST-å¼ ä¸‰&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">PUT</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">putUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;PUT-å¼ ä¸‰&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">DELETE</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;DELETE-å¼ ä¸‰&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">	<span class="token annotation punctuation">@Bean</span></span>
<span class="line">	<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.mvc.hiddenmethod.filter&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">public</span> <span class="token class-name">OrderedHiddenHttpMethodFilter</span> <span class="token function">hiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OrderedHiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">//è‡ªå®šä¹‰filter</span></span>
<span class="line">    <span class="token annotation punctuation">@Bean</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">HiddenHttpMethodFilter</span> <span class="token function">hiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">HiddenHttpMethodFilter</span> methodFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        methodFilter<span class="token punctuation">.</span><span class="token function">setMethodParam</span><span class="token punctuation">(</span><span class="token string">&quot;_m&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> methodFilter<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>ReståŸç†ï¼ˆè¡¨å•æäº¤è¦ä½¿ç”¨RESTçš„æ—¶å€™ï¼‰</p><ul><li><p>è¡¨å•æäº¤ä¼šå¸¦ä¸Š**_method=PUT**</p></li><li><p><strong>è¯·æ±‚è¿‡æ¥è¢«</strong>HiddenHttpMethodFilteræ‹¦æˆª</p></li><li><ul><li>è¯·æ±‚æ˜¯å¦æ­£å¸¸ï¼Œå¹¶ä¸”æ˜¯POST</li></ul></li><li><ul><li><ul><li>è·å–åˆ°**_method**çš„å€¼ã€‚</li><li>å…¼å®¹ä»¥ä¸‹è¯·æ±‚ï¼›<strong>PUT</strong>.<strong>DELETE</strong>.<strong>PATCH</strong></li><li><strong>åŸç”Ÿrequestï¼ˆpostï¼‰ï¼ŒåŒ…è£…æ¨¡å¼requesWrapperé‡å†™äº†getMethodæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¼ å…¥çš„å€¼ã€‚</strong></li><li><strong>è¿‡æ»¤å™¨é“¾æ”¾è¡Œçš„æ—¶å€™ç”¨wrapperã€‚ä»¥åçš„æ–¹æ³•è°ƒç”¨getMethodæ˜¯è°ƒç”¨****requesWrapperçš„ã€‚</strong></li></ul></li></ul></li></ul><p><strong>Restä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·ï¼Œ</strong></p><ul><li>å¦‚PostManç›´æ¥å‘é€Putã€deleteç­‰æ–¹å¼è¯·æ±‚ï¼Œæ— éœ€Filterã€‚</li></ul><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">mvc</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">hiddenmethod</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">filter</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token comment">#å¼€å¯é¡µé¢è¡¨å•çš„ReståŠŸèƒ½</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€è¯·æ±‚æ˜ å°„åŸç†" tabindex="-1"><a class="header-anchor" href="#_2ã€è¯·æ±‚æ˜ å°„åŸç†"><span>2ã€è¯·æ±‚æ˜ å°„åŸç†</span></a></h3><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007315.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>SpringMVCåŠŸèƒ½åˆ†æéƒ½ä» org.springframework.web.servlet.DispatcherServlet-ã€‹doDispatchï¼ˆï¼‰</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doDispatch</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token class-name">HttpServletRequest</span> processedRequest <span class="token operator">=</span> request<span class="token punctuation">;</span></span>
<span class="line">		<span class="token class-name">HandlerExecutionChain</span> mappedHandler <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">boolean</span> multipartRequestParsed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token class-name">WebAsyncManager</span> asyncManager <span class="token operator">=</span> <span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">getAsyncManager</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token class-name">Exception</span> dispatchException <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">			<span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">				processedRequest <span class="token operator">=</span> <span class="token function">checkMultipart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				multipartRequestParsed <span class="token operator">=</span> <span class="token punctuation">(</span>processedRequest <span class="token operator">!=</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">				<span class="token comment">// æ‰¾åˆ°å½“å‰è¯·æ±‚ä½¿ç”¨å“ªä¸ªHandlerï¼ˆControllerçš„æ–¹æ³•ï¼‰å¤„ç†</span></span>
<span class="line">				mappedHandler <span class="token operator">=</span> <span class="token function">getHandler</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                </span>
<span class="line">                <span class="token comment">//HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„ã€‚/xxx-&gt;&gt;xxxx</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007403.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>RequestMappingHandlerMapping</strong>ï¼šä¿å­˜äº†æ‰€æœ‰@RequestMapping å’Œhandlerçš„æ˜ å°„è§„åˆ™ã€‚</p><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007325.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ‰€æœ‰çš„è¯·æ±‚æ˜ å°„éƒ½åœ¨HandlerMappingä¸­ã€‚</p><ul><li><p>SpringBootè‡ªåŠ¨é…ç½®æ¬¢è¿é¡µçš„ WelcomePageHandlerMapping ã€‚è®¿é—® /èƒ½è®¿é—®åˆ°index.htmlï¼›</p></li><li><p>SpringBootè‡ªåŠ¨é…ç½®äº†é»˜è®¤ çš„ RequestMappingHandlerMapping</p></li><li><p>è¯·æ±‚è¿›æ¥ï¼ŒæŒ¨ä¸ªå°è¯•æ‰€æœ‰çš„HandlerMappingçœ‹æ˜¯å¦æœ‰è¯·æ±‚ä¿¡æ¯ã€‚</p></li><li><ul><li>å¦‚æœæœ‰å°±æ‰¾åˆ°è¿™ä¸ªè¯·æ±‚å¯¹åº”çš„handler</li><li>å¦‚æœæ²¡æœ‰å°±æ˜¯ä¸‹ä¸€ä¸ª HandlerMapping</li></ul></li><li><p>æˆ‘ä»¬éœ€è¦ä¸€äº›è‡ªå®šä¹‰çš„æ˜ å°„å¤„ç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­æ”¾<strong>HandlerMapping</strong>ã€‚è‡ªå®šä¹‰ <strong>HandlerMapping</strong></p></li></ul><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line">	<span class="token keyword">protected</span> <span class="token class-name">HandlerExecutionChain</span> <span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMapping</span> mapping <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token class-name">HandlerExecutionChain</span> handler <span class="token operator">=</span> mapping<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token keyword">return</span> handler<span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="_1ã€æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_1ã€æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£"><span>1ã€æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£</span></a></h2><h3 id="_1-1ã€æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_1-1ã€æ³¨è§£"><span>1.1ã€æ³¨è§£ï¼š</span></a></h3><p>@PathVariableã€@RequestHeaderã€@ModelAttributeã€@RequestParamã€@MatrixVariableã€@CookieValueã€@RequestBody</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token annotation punctuation">@RestController</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ParameterTestController</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//  car/2/owner/zhangsan</span></span>
<span class="line">    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/car/{id}/owner/{username}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">,</span></span>
<span class="line">                                     <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span></span>
<span class="line">                                     <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> pv<span class="token punctuation">,</span></span>
<span class="line">                                     <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;User-Agent&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userAgent<span class="token punctuation">,</span></span>
<span class="line">                                     <span class="token annotation punctuation">@RequestHeader</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> header<span class="token punctuation">,</span></span>
<span class="line">                                     <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span></span>
<span class="line">                                     <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;inters&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> inters<span class="token punctuation">,</span></span>
<span class="line">                                     <span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span></span>
<span class="line">                                     <span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">&quot;_ga&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> _ga<span class="token punctuation">,</span></span>
<span class="line">                                     <span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">&quot;_ga&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Cookie</span> cookie<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//        map.put(&quot;id&quot;,id);</span></span>
<span class="line"><span class="token comment">//        map.put(&quot;name&quot;,name);</span></span>
<span class="line"><span class="token comment">//        map.put(&quot;pv&quot;,pv);</span></span>
<span class="line"><span class="token comment">//        map.put(&quot;userAgent&quot;,userAgent);</span></span>
<span class="line"><span class="token comment">//        map.put(&quot;headers&quot;,header);</span></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;inters&quot;</span><span class="token punctuation">,</span>inters<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;params&quot;</span><span class="token punctuation">,</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;_ga&quot;</span><span class="token punctuation">,</span>_ga<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;===&gt;&quot;</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> map<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">postMethod</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> map<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//1ã€è¯­æ³•ï¼š è¯·æ±‚è·¯å¾„ï¼š/cars/sell;low=34;brand=byd,audi,yd</span></span>
<span class="line">    <span class="token comment">//2ã€SpringBooté»˜è®¤æ˜¯ç¦ç”¨äº†çŸ©é˜µå˜é‡çš„åŠŸèƒ½</span></span>
<span class="line">    <span class="token comment">//      æ‰‹åŠ¨å¼€å¯ï¼šåŸç†ã€‚å¯¹äºè·¯å¾„çš„å¤„ç†ã€‚UrlPathHelperè¿›è¡Œè§£æã€‚</span></span>
<span class="line">    <span class="token comment">//              removeSemicolonContentï¼ˆç§»é™¤åˆ†å·å†…å®¹ï¼‰æ”¯æŒçŸ©é˜µå˜é‡çš„</span></span>
<span class="line">    <span class="token comment">//3ã€çŸ©é˜µå˜é‡å¿…é¡»æœ‰urlè·¯å¾„å˜é‡æ‰èƒ½è¢«è§£æ</span></span>
<span class="line">    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/cars/{path}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">carsSell</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span><span class="token string">&quot;low&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> low<span class="token punctuation">,</span></span>
<span class="line">                        <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span><span class="token string">&quot;brand&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> brand<span class="token punctuation">,</span></span>
<span class="line">                        <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> path<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;low&quot;</span><span class="token punctuation">,</span>low<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;brand&quot;</span><span class="token punctuation">,</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">,</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> map<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// /boss/1;age=20/2;age=10</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/boss/{bossId}/{empId}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">boss</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>pathVar <span class="token operator">=</span> <span class="token string">&quot;bossId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> bossAge<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>pathVar <span class="token operator">=</span> <span class="token string">&quot;empId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> empAge<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;bossAge&quot;</span><span class="token punctuation">,</span>bossAge<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;empAge&quot;</span><span class="token punctuation">,</span>empAge<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> map<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_1-2ã€servlet-api" tabindex="-1"><a class="header-anchor" href="#_1-2ã€servlet-api"><span>1.2ã€Servlet APIï¼š</span></a></h3><p>WebRequestã€ServletRequestã€MultipartRequestã€ HttpSessionã€javax.servlet.http.PushBuilderã€Principalã€InputStreamã€Readerã€HttpMethodã€Localeã€TimeZoneã€ZoneId</p><p><strong>ServletRequestMethodArgumentResolver ä»¥ä¸Šçš„éƒ¨åˆ†å‚æ•°</strong></p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token annotation punctuation">@Override</span></span>
<span class="line">	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">supportsParameter</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> paramType <span class="token operator">=</span> parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">WebRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">ServletRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">MultipartRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">HttpSession</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token punctuation">(</span>pushBuilder <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> pushBuilder<span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">Principal</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">InputStream</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">Reader</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> paramType <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> paramType <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> paramType <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> paramType<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_1-3ã€å¤æ‚å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_1-3ã€å¤æ‚å‚æ•°"><span>1.3ã€å¤æ‚å‚æ•°ï¼š</span></a></h3><p><strong>Map</strong>ã€**Modelï¼ˆmapã€modelé‡Œé¢çš„æ•°æ®ä¼šè¢«æ”¾åœ¨requestçš„è¯·æ±‚åŸŸ request.setAttributeï¼‰ã€**Errors/BindingResultã€<strong>RedirectAttributesï¼ˆ é‡å®šå‘æºå¸¦æ•°æ®ï¼‰</strong>ã€<strong>ServletResponseï¼ˆresponseï¼‰</strong>ã€SessionStatusã€UriComponentsBuilderã€ServletUriComponentsBuilder</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span>  <span class="token class-name">Model</span> model<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request éƒ½æ˜¯å¯ä»¥ç»™requeståŸŸä¸­æ”¾æ•°æ®ï¼Œ</span>
<span class="line">request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Mapã€Modelç±»å‹çš„å‚æ•°</strong>ï¼Œä¼šè¿”å› mavContainer.getModelï¼ˆï¼‰ï¼›---&gt; BindingAwareModelMap æ˜¯Model ä¹Ÿæ˜¯Map</p><p><strong>mavContainer</strong>.getModel(); è·å–åˆ°å€¼çš„</p><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007326.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="" tabindex="-1"><a class="header-anchor" href="#"><span><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007297.png" alt="" loading="lazy"></span></a></h3><h3 id="-1" tabindex="-1"><a class="header-anchor" href="#-1"><span><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007303.png" alt="" loading="lazy"></span></a></h3><h3 id="_1-4ã€è‡ªå®šä¹‰å¯¹è±¡å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_1-4ã€è‡ªå®šä¹‰å¯¹è±¡å‚æ•°"><span>1.4ã€è‡ªå®šä¹‰å¯¹è±¡å‚æ•°ï¼š</span></a></h3><p>å¯ä»¥è‡ªåŠ¨ç±»å‹è½¬æ¢ä¸æ ¼å¼åŒ–ï¼Œå¯ä»¥çº§è”å°è£…ã€‚</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> *     å§“åï¼š <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"> *     å¹´é¾„ï¼š <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"> *     ç”Ÿæ—¥ï¼š <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birth<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"> *     å® ç‰©å§“åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pet.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"> *     å® ç‰©å¹´é¾„ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pet.age<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"> */</span></span>
<span class="line"><span class="token annotation punctuation">@Data</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Date</span> birth<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Pet</span> pet<span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Data</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Pet</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> age<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">result</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="_2ã€pojoå°è£…è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_2ã€pojoå°è£…è¿‡ç¨‹"><span>2ã€POJOå°è£…è¿‡ç¨‹</span></a></h2><ul><li><strong>ServletModelAttributeMethodProcessor</strong></li></ul><h2 id="_3ã€å‚æ•°å¤„ç†åŸç†" tabindex="-1"><a class="header-anchor" href="#_3ã€å‚æ•°å¤„ç†åŸç†"><span>3ã€å‚æ•°å¤„ç†åŸç†</span></a></h2><ul><li>HandlerMappingä¸­æ‰¾åˆ°èƒ½å¤„ç†è¯·æ±‚çš„Handlerï¼ˆController.method()ï¼‰</li><li>ä¸ºå½“å‰Handler æ‰¾ä¸€ä¸ªé€‚é…å™¨ HandlerAdapterï¼› <strong>RequestMappingHandlerAdapter</strong></li><li>é€‚é…å™¨æ‰§è¡Œç›®æ ‡æ–¹æ³•å¹¶ç¡®å®šæ–¹æ³•å‚æ•°çš„æ¯ä¸€ä¸ªå€¼</li></ul><h3 id="_1ã€handleradapter" tabindex="-1"><a class="header-anchor" href="#_1ã€handleradapter"><span>1ã€HandlerAdapter</span></a></h3><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007578.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>0 - æ”¯æŒæ–¹æ³•ä¸Šæ ‡æ³¨@RequestMapping</p><p>1 - æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹çš„</p><p>xxxxxx</p><h3 id="_2ã€æ‰§è¡Œç›®æ ‡æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_2ã€æ‰§è¡Œç›®æ ‡æ–¹æ³•"><span>2ã€æ‰§è¡Œç›®æ ‡æ–¹æ³•</span></a></h3><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token comment">// Actually invoke the handler.</span></span>
<span class="line"><span class="token comment">//DispatcherServlet -- doDispatch</span></span>
<span class="line">mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mav <span class="token operator">=</span> <span class="token function">invokeHandlerMethod</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handlerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ‰§è¡Œç›®æ ‡æ–¹æ³•</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">//ServletInvocableHandlerMethod</span></span>
<span class="line"><span class="token class-name">Object</span> returnValue <span class="token operator">=</span> <span class="token function">invokeForRequest</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//è·å–æ–¹æ³•çš„å‚æ•°å€¼</span></span>
<span class="line"><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token function">getMethodArgumentValues</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_3ã€å‚æ•°è§£æå™¨-handlermethodargumentresolver" tabindex="-1"><a class="header-anchor" href="#_3ã€å‚æ•°è§£æå™¨-handlermethodargumentresolver"><span>3ã€å‚æ•°è§£æå™¨-HandlerMethodArgumentResolver</span></a></h3><p>ç¡®å®šå°†è¦æ‰§è¡Œçš„ç›®æ ‡æ–¹æ³•çš„æ¯ä¸€ä¸ªå‚æ•°çš„å€¼æ˜¯ä»€ä¹ˆ;</p><p>SpringMVCç›®æ ‡æ–¹æ³•èƒ½å†™å¤šå°‘ç§å‚æ•°ç±»å‹ã€‚å–å†³äºå‚æ•°è§£æå™¨ã€‚</p><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007646.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007658.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>å½“å‰è§£æå™¨æ˜¯å¦æ”¯æŒè§£æè¿™ç§å‚æ•°</li><li>æ”¯æŒå°±è°ƒç”¨ resolveArgument</li></ul><h3 id="_4ã€è¿”å›å€¼å¤„ç†å™¨" tabindex="-1"><a class="header-anchor" href="#_4ã€è¿”å›å€¼å¤„ç†å™¨"><span>4ã€è¿”å›å€¼å¤„ç†å™¨</span></a></h3><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007691.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_5ã€å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼" tabindex="-1"><a class="header-anchor" href="#_5ã€å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼"><span>5ã€å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼</span></a></h3><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token class-name">InvocableHandlerMethod</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span></span>
<span class="line"><span class="token keyword">protected</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getMethodArgumentValues</span><span class="token punctuation">(</span><span class="token class-name">NativeWebRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span></span>
<span class="line">			<span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> providedArgs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">		<span class="token class-name">MethodParameter</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameters <span class="token operator">=</span> <span class="token function">getMethodParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">return</span> <span class="token constant">EMPTY_ARGS</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>parameters<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> parameters<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token class-name">MethodParameter</span> parameter <span class="token operator">=</span> parameters<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">			parameter<span class="token punctuation">.</span><span class="token function">initParameterNameDiscovery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parameterNameDiscoverer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">findProvidedArgument</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">continue</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>resolvers<span class="token punctuation">.</span><span class="token function">supportsParameter</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token function">formatArgumentError</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> <span class="token string">&quot;No suitable resolver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">				args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resolvers<span class="token punctuation">.</span><span class="token function">resolveArgument</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataBinderFactory<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token comment">// Leave stack trace for later, exception may actually be resolved and handled...</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token class-name">String</span> exMsg <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token keyword">if</span> <span class="token punctuation">(</span>exMsg <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>exMsg<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>parameter<span class="token punctuation">.</span><span class="token function">getExecutable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toGenericString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token function">formatArgumentError</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> exMsg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">				<span class="token keyword">throw</span> ex<span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">return</span> args<span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h4 id="_5-1ã€æŒ¨ä¸ªåˆ¤æ–­æ‰€æœ‰å‚æ•°è§£æå™¨é‚£ä¸ªæ”¯æŒè§£æè¿™ä¸ªå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_5-1ã€æŒ¨ä¸ªåˆ¤æ–­æ‰€æœ‰å‚æ•°è§£æå™¨é‚£ä¸ªæ”¯æŒè§£æè¿™ä¸ªå‚æ•°"><span>5.1ã€æŒ¨ä¸ªåˆ¤æ–­æ‰€æœ‰å‚æ•°è§£æå™¨é‚£ä¸ªæ”¯æŒè§£æè¿™ä¸ªå‚æ•°</span></a></h4><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line">	<span class="token annotation punctuation">@Nullable</span></span>
<span class="line">	<span class="token keyword">private</span> <span class="token class-name">HandlerMethodArgumentResolver</span> <span class="token function">getArgumentResolver</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token class-name">HandlerMethodArgumentResolver</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolverCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMethodArgumentResolver</span> resolver <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolvers<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span>resolver<span class="token punctuation">.</span><span class="token function">supportsParameter</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					result <span class="token operator">=</span> resolver<span class="token punctuation">;</span></span>
<span class="line">					<span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolverCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">return</span> result<span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h4 id="_5-2ã€è§£æè¿™ä¸ªå‚æ•°çš„å€¼" tabindex="-1"><a class="header-anchor" href="#_5-2ã€è§£æè¿™ä¸ªå‚æ•°çš„å€¼"><span>5.2ã€è§£æè¿™ä¸ªå‚æ•°çš„å€¼</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">è°ƒç”¨å„è‡ª <span class="token class-name">HandlerMethodArgumentResolver</span> çš„ resolveArgument æ–¹æ³•å³å¯</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_5-3ã€è‡ªå®šä¹‰ç±»å‹å‚æ•°-å°è£…pojo" tabindex="-1"><a class="header-anchor" href="#_5-3ã€è‡ªå®šä¹‰ç±»å‹å‚æ•°-å°è£…pojo"><span>5.3ã€è‡ªå®šä¹‰ç±»å‹å‚æ•° å°è£…POJO</span></a></h4><p><strong>ServletModelAttributeMethodProcessor è¿™ä¸ªå‚æ•°å¤„ç†å™¨æ”¯æŒ</strong></p><p><strong>æ˜¯å¦ä¸ºç®€å•ç±»å‹ã€‚</strong></p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isSimpleValueType</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Void</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">!=</span> type <span class="token operator">&amp;&amp;</span> <span class="token keyword">void</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">!=</span> type <span class="token operator">&amp;&amp;</span></span>
<span class="line">				<span class="token punctuation">(</span><span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPrimitiveOrWrapper</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">Enum</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">CharSequence</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">Number</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">Temporal</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">				<span class="token constant">URI</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> type <span class="token operator">||</span></span>
<span class="line">				<span class="token constant">URL</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> type <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> type <span class="token operator">||</span></span>
<span class="line">				<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token annotation punctuation">@Override</span></span>
<span class="line">	<span class="token annotation punctuation">@Nullable</span></span>
<span class="line">	<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">resolveArgument</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span></span>
<span class="line">			<span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">WebDataBinderFactory</span> binderFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">		<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span>mavContainer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;ModelAttributeMethodProcessor requires ModelAndViewContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span>binderFactory <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;ModelAttributeMethodProcessor requires WebDataBinderFactory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">ModelFactory</span><span class="token punctuation">.</span><span class="token function">getNameForParameter</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token class-name">ModelAttribute</span> ann <span class="token operator">=</span> parameter<span class="token punctuation">.</span><span class="token function">getParameterAnnotation</span><span class="token punctuation">(</span><span class="token class-name">ModelAttribute</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>ann <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			mavContainer<span class="token punctuation">.</span><span class="token function">setBinding</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> ann<span class="token punctuation">.</span><span class="token function">binding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token class-name">Object</span> attribute <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token class-name">BindingResult</span> bindingResult <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>mavContainer<span class="token punctuation">.</span><span class="token function">containsAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			attribute <span class="token operator">=</span> mavContainer<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">// Create attribute instance</span></span>
<span class="line">			<span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">				attribute <span class="token operator">=</span> <span class="token function">createAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> parameter<span class="token punctuation">,</span> binderFactory<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">BindException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isBindExceptionRequired</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token comment">// No BindingResult parameter -&gt; fail with BindException</span></span>
<span class="line">					<span class="token keyword">throw</span> ex<span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">				<span class="token comment">// Otherwise, expose null/empty value and associated BindingResult</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span>parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					attribute <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">				bindingResult <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>bindingResult <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">// Bean property binding and validation;</span></span>
<span class="line">			<span class="token comment">// skipped in case of binding failure on construction.</span></span>
<span class="line">			<span class="token class-name">WebDataBinder</span> binder <span class="token operator">=</span> binderFactory<span class="token punctuation">.</span><span class="token function">createBinder</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> attribute<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>binder<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mavContainer<span class="token punctuation">.</span><span class="token function">isBindingDisabled</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token function">bindRequestParameters</span><span class="token punctuation">(</span>binder<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">				<span class="token function">validateIfApplicable</span><span class="token punctuation">(</span>binder<span class="token punctuation">,</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span>binder<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isBindExceptionRequired</span><span class="token punctuation">(</span>binder<span class="token punctuation">,</span> parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BindException</span><span class="token punctuation">(</span>binder<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token comment">// Value type adaptation, also covering java.util.Optional</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInstance</span><span class="token punctuation">(</span>attribute<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				attribute <span class="token operator">=</span> binder<span class="token punctuation">.</span><span class="token function">convertIfNecessary</span><span class="token punctuation">(</span>binder<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			bindingResult <span class="token operator">=</span> binder<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// Add resolved attribute and BindingResult at the end of the model</span></span>
<span class="line">		<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> bindingResultModel <span class="token operator">=</span> bindingResult<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		mavContainer<span class="token punctuation">.</span><span class="token function">removeAttributes</span><span class="token punctuation">(</span>bindingResultModel<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		mavContainer<span class="token punctuation">.</span><span class="token function">addAllAttributes</span><span class="token punctuation">(</span>bindingResultModel<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token keyword">return</span> attribute<span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="-2" tabindex="-1"><a class="header-anchor" href="#-2"><span></span></a></h3><p><strong>WebDataBinder binder = binderFactory.createBinder(webRequest, attribute, name);</strong></p><p><strong>WebDataBinder :webæ•°æ®ç»‘å®šå™¨ï¼Œå°†è¯·æ±‚å‚æ•°çš„å€¼ç»‘å®šåˆ°æŒ‡å®šçš„JavaBeané‡Œé¢</strong></p><p><strong>WebDataBinder åˆ©ç”¨å®ƒé‡Œé¢çš„ Converters å°†è¯·æ±‚æ•°æ®è½¬æˆæŒ‡å®šçš„æ•°æ®ç±»å‹ã€‚å†æ¬¡å°è£…åˆ°JavaBeanä¸­</strong></p><p><strong>GenericConversionServiceï¼šåœ¨è®¾ç½®æ¯ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œæ‰¾å®ƒé‡Œé¢çš„æ‰€æœ‰converteré‚£ä¸ªå¯ä»¥å°†è¿™ä¸ªæ•°æ®ç±»å‹ï¼ˆrequestå¸¦æ¥å‚æ•°çš„å­—ç¬¦ä¸²ï¼‰è½¬æ¢åˆ°æŒ‡å®šçš„ç±»å‹ï¼ˆJavaBean -- Integerï¼‰</strong></p><p><strong>byte -- &gt; file</strong></p><p>@FunctionalInterface<strong>public interface</strong> Converter&lt;S, T&gt;</p><h3 id="-3" tabindex="-1"><a class="header-anchor" href="#-3"><span><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070008801.png" alt="" loading="lazy"></span></a></h3><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070008325.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æœªæ¥æˆ‘ä»¬å¯ä»¥ç»™WebDataBinderé‡Œé¢æ”¾è‡ªå·±çš„Converterï¼›</p><p><strong>private static final class</strong> StringToNumber&lt;T <strong>extends</strong> Number&gt; <strong>implements</strong> Converter&lt;String, T&gt;</p><p>è‡ªå®šä¹‰ Converter</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line">    <span class="token comment">//1ã€WebMvcConfigurerå®šåˆ¶åŒ–SpringMVCçš„åŠŸèƒ½</span></span>
<span class="line">    <span class="token annotation punctuation">@Bean</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token function">webMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token annotation punctuation">@Override</span></span>
<span class="line">            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configurePathMatch</span><span class="token punctuation">(</span><span class="token class-name">PathMatchConfigurer</span> configurer<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token class-name">UrlPathHelper</span> urlPathHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlPathHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// ä¸ç§»é™¤ï¼›åé¢çš„å†…å®¹ã€‚çŸ©é˜µå˜é‡åŠŸèƒ½å°±å¯ä»¥ç”Ÿæ•ˆ</span></span>
<span class="line">                urlPathHelper<span class="token punctuation">.</span><span class="token function">setRemoveSemicolonContent</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                configurer<span class="token punctuation">.</span><span class="token function">setUrlPathHelper</span><span class="token punctuation">(</span>urlPathHelper<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token annotation punctuation">@Override</span></span>
<span class="line">            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFormatters</span><span class="token punctuation">(</span><span class="token class-name">FormatterRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                registry<span class="token punctuation">.</span><span class="token function">addConverter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Converter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Pet</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">                    <span class="token annotation punctuation">@Override</span></span>
<span class="line">                    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token comment">// å•ŠçŒ«,3</span></span>
<span class="line">                        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                            <span class="token class-name">Pet</span> pet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> split <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                            pet<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>split<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                            pet<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>split<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                            <span class="token keyword">return</span> pet<span class="token punctuation">;</span></span>
<span class="line">                        <span class="token punctuation">}</span></span>
<span class="line">                        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_6ã€ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆ" tabindex="-1"><a class="header-anchor" href="#_6ã€ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆ"><span>6ã€ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆ</span></a></h3><p>å°†æ‰€æœ‰çš„æ•°æ®éƒ½æ”¾åœ¨ <strong>ModelAndViewContainer</strong>ï¼›åŒ…å«è¦å»çš„é¡µé¢åœ°å€Viewã€‚è¿˜åŒ…å«Modelæ•°æ®ã€‚</p><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070009569.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_7ã€å¤„ç†æ´¾å‘ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_7ã€å¤„ç†æ´¾å‘ç»“æœ"><span>7ã€å¤„ç†æ´¾å‘ç»“æœ</span></a></h3><p><strong>processDispatchResult</strong>(processedRequest, response, mappedHandler, mv, dispatchException);</p><p>renderMergedOutputModel(mergedModel, getRequestToExpose(request), response);</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token class-name">InternalResourceView</span>ï¼š</span>
<span class="line"><span class="token annotation punctuation">@Override</span></span>
<span class="line">	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">renderMergedOutputModel</span><span class="token punctuation">(</span></span>
<span class="line">			<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// Expose the model object as request attributes.</span></span>
<span class="line">		<span class="token function">exposeModelAsRequestAttributes</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// Expose helpers as request attributes, if any.</span></span>
<span class="line">		<span class="token function">exposeHelpers</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// Determine the path for the request dispatcher.</span></span>
<span class="line">		<span class="token class-name">String</span> dispatcherPath <span class="token operator">=</span> <span class="token function">prepareForRendering</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// Obtain a RequestDispatcher for the target resource (typically a JSP).</span></span>
<span class="line">		<span class="token class-name">RequestDispatcher</span> rd <span class="token operator">=</span> <span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> dispatcherPath<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>rd <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">&quot;Could not get RequestDispatcher for [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span></span>
<span class="line">					<span class="token string">&quot;]: Check that the corresponding file exists within your web application archive!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// If already included or response already committed, perform include, else forward.</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">useInclude</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Including [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			rd<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">// Note: The forwarded resource is supposed to determine the content type itself.</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Forwarding to [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			rd<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h1 id="-4" tabindex="-1"><a class="header-anchor" href="#-4"><span></span></a></h1><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">æš´éœ²æ¨¡å‹ä½œä¸ºè¯·æ±‚åŸŸå±æ€§</span>
<span class="line"><span class="token comment">// Expose the model object as request attributes.</span></span>
<span class="line">		<span class="token function">exposeModelAsRequestAttributes</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="-5" tabindex="-1"><a class="header-anchor" href="#-5"><span></span></a></h1><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">exposeModelAsRequestAttributes</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span></span>
<span class="line">			<span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//modelä¸­çš„æ‰€æœ‰æ•°æ®éå†æŒ¨ä¸ªæ”¾åœ¨è¯·æ±‚åŸŸä¸­</span></span>
<span class="line">		model<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">				request<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h1 id="_4ã€æ•°æ®å“åº”ä¸å†…å®¹åå•†" tabindex="-1"><a class="header-anchor" href="#_4ã€æ•°æ®å“åº”ä¸å†…å®¹åå•†"><span>4ã€æ•°æ®å“åº”ä¸å†…å®¹åå•†</span></a></h1><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070009418.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_1ã€å“åº”json" tabindex="-1"><a class="header-anchor" href="#_1ã€å“åº”json"><span>1ã€å“åº”JSON</span></a></h2><h3 id="_1-1ã€jackson-jar-responsebody" tabindex="-1"><a class="header-anchor" href="#_1-1ã€jackson-jar-responsebody"><span>1.1ã€jackson.jar+@ResponseBody</span></a></h3><div class="language-xml line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="xml" data-title="xml" style="--vp-collapsed-lines:10;"><pre><code><span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">webåœºæ™¯è‡ªåŠ¨å¼•å…¥äº†jsonåœºæ™¯</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-json<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070009374.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç»™å‰ç«¯è‡ªåŠ¨è¿”å›jsonæ•°æ®ï¼›</p><h4 id="_1ã€è¿”å›å€¼è§£æå™¨" tabindex="-1"><a class="header-anchor" href="#_1ã€è¿”å›å€¼è§£æå™¨"><span>1ã€è¿”å›å€¼è§£æå™¨</span></a></h4><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007864.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">this</span><span class="token punctuation">.</span>returnValueHandlers<span class="token punctuation">.</span><span class="token function">handleReturnValue</span><span class="token punctuation">(</span></span>
<span class="line">					returnValue<span class="token punctuation">,</span> <span class="token function">getReturnValueType</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">)</span><span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token annotation punctuation">@Override</span></span>
<span class="line">	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleReturnValue</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Object</span> returnValue<span class="token punctuation">,</span> <span class="token class-name">MethodParameter</span> returnType<span class="token punctuation">,</span></span>
<span class="line">			<span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span> <span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">		<span class="token class-name">HandlerMethodReturnValueHandler</span> handler <span class="token operator">=</span> <span class="token function">selectHandler</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">,</span> returnType<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Unknown return value type: &quot;</span> <span class="token operator">+</span> returnType<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		handler<span class="token punctuation">.</span><span class="token function">handleReturnValue</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">,</span> returnType<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token class-name">RequestResponseBodyMethodProcessor</span>  	</span>
<span class="line"><span class="token annotation punctuation">@Override</span></span>
<span class="line">	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleReturnValue</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Object</span> returnValue<span class="token punctuation">,</span> <span class="token class-name">MethodParameter</span> returnType<span class="token punctuation">,</span></span>
<span class="line">			<span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span> <span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">HttpMediaTypeNotAcceptableException</span><span class="token punctuation">,</span> <span class="token class-name">HttpMessageNotWritableException</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">		mavContainer<span class="token punctuation">.</span><span class="token function">setRequestHandled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token class-name">ServletServerHttpRequest</span> inputMessage <span class="token operator">=</span> <span class="token function">createInputMessage</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token class-name">ServletServerHttpResponse</span> outputMessage <span class="token operator">=</span> <span class="token function">createOutputMessage</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// Try even with null return value. ResponseBodyAdvice could get involved.</span></span>
<span class="line">        <span class="token comment">// ä½¿ç”¨æ¶ˆæ¯è½¬æ¢å™¨è¿›è¡Œå†™å‡ºæ“ä½œ</span></span>
<span class="line">		<span class="token function">writeWithMessageConverters</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">,</span> returnType<span class="token punctuation">,</span> inputMessage<span class="token punctuation">,</span> outputMessage<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h4 id="_2ã€è¿”å›å€¼è§£æå™¨åŸç†" tabindex="-1"><a class="header-anchor" href="#_2ã€è¿”å›å€¼è§£æå™¨åŸç†"><span>2ã€è¿”å›å€¼è§£æå™¨åŸç†</span></a></h4><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070009147.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><p>1ã€è¿”å›å€¼å¤„ç†å™¨åˆ¤æ–­æ˜¯å¦æ”¯æŒè¿™ç§ç±»å‹è¿”å›å€¼ supportsReturnType</p></li><li><p>2ã€è¿”å›å€¼å¤„ç†å™¨è°ƒç”¨ handleReturnValue è¿›è¡Œå¤„ç†</p></li><li><p>3ã€RequestResponseBodyMethodProcessor å¯ä»¥å¤„ç†è¿”å›å€¼æ ‡äº†@ResponseBody æ³¨è§£çš„ã€‚</p></li><li><ul><li>\1. åˆ©ç”¨ MessageConverters è¿›è¡Œå¤„ç† å°†æ•°æ®å†™ä¸ºjson</li></ul></li><li><ul><li><ul><li>1ã€å†…å®¹åå•†ï¼ˆæµè§ˆå™¨é»˜è®¤ä¼šä»¥è¯·æ±‚å¤´çš„æ–¹å¼å‘Šè¯‰æœåŠ¡å™¨ä»–èƒ½æ¥å—ä»€ä¹ˆæ ·çš„å†…å®¹ç±»å‹ï¼‰</li><li>2ã€æœåŠ¡å™¨æœ€ç»ˆæ ¹æ®è‡ªå·±è‡ªèº«çš„èƒ½åŠ›ï¼Œå†³å®šæœåŠ¡å™¨èƒ½ç”Ÿäº§å‡ºä»€ä¹ˆæ ·å†…å®¹ç±»å‹çš„æ•°æ®ï¼Œ</li><li>3ã€SpringMVCä¼šæŒ¨ä¸ªéå†æ‰€æœ‰å®¹å™¨åº•å±‚çš„ HttpMessageConverter ï¼Œçœ‹è°èƒ½å¤„ç†ï¼Ÿ</li></ul></li></ul></li><li><ul><li><ul><li><ul><li>1ã€å¾—åˆ°MappingJackson2HttpMessageConverterå¯ä»¥å°†å¯¹è±¡å†™ä¸ºjson</li><li>2ã€åˆ©ç”¨MappingJackson2HttpMessageConverterå°†å¯¹è±¡è½¬ä¸ºjsonå†å†™å‡ºå»ã€‚</li></ul></li></ul></li></ul></li></ul><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007494.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_1-2ã€springmvcåˆ°åº•æ”¯æŒå“ªäº›è¿”å›å€¼" tabindex="-1"><a class="header-anchor" href="#_1-2ã€springmvcåˆ°åº•æ”¯æŒå“ªäº›è¿”å›å€¼"><span>1.2ã€SpringMVCåˆ°åº•æ”¯æŒå“ªäº›è¿”å›å€¼</span></a></h3><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token class-name">ModelAndView</span></span>
<span class="line"><span class="token class-name">Model</span></span>
<span class="line"><span class="token class-name">View</span></span>
<span class="line"><span class="token class-name">ResponseEntity</span> </span>
<span class="line"><span class="token class-name">ResponseBodyEmitter</span></span>
<span class="line"><span class="token class-name">StreamingResponseBody</span></span>
<span class="line"><span class="token class-name">HttpEntity</span></span>
<span class="line"><span class="token class-name">HttpHeaders</span></span>
<span class="line"><span class="token class-name">Callable</span></span>
<span class="line"><span class="token class-name">DeferredResult</span></span>
<span class="line"><span class="token class-name">ListenableFuture</span></span>
<span class="line"><span class="token class-name">CompletionStage</span></span>
<span class="line"><span class="token class-name">WebAsyncTask</span></span>
<span class="line">æœ‰ <span class="token annotation punctuation">@ModelAttribute</span> ä¸”ä¸ºå¯¹è±¡ç±»å‹çš„</span>
<span class="line"><span class="token annotation punctuation">@ResponseBody</span> æ³¨è§£ <span class="token operator">--</span><span class="token operator">-&gt;</span> <span class="token class-name">RequestResponseBodyMethodProcessor</span>ï¼›</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_1-3ã€httpmessageconverteråŸç†" tabindex="-1"><a class="header-anchor" href="#_1-3ã€httpmessageconverteråŸç†"><span>1.3ã€HTTPMessageConverteråŸç†</span></a></h3><h4 id="_1ã€messageconverterè§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_1ã€messageconverterè§„èŒƒ"><span>1ã€MessageConverterè§„èŒƒ</span></a></h4><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070009452.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>HttpMessageConverter: çœ‹æ˜¯å¦æ”¯æŒå°† æ­¤ Classç±»å‹çš„å¯¹è±¡ï¼Œè½¬ä¸ºMediaTypeç±»å‹çš„æ•°æ®ã€‚</p><p>ä¾‹å­ï¼šPersonå¯¹è±¡è½¬ä¸ºJSONã€‚æˆ–è€… JSONè½¬ä¸ºPerson</p><h4 id="_2ã€é»˜è®¤çš„messageconverter" tabindex="-1"><a class="header-anchor" href="#_2ã€é»˜è®¤çš„messageconverter"><span>2ã€é»˜è®¤çš„MessageConverter</span></a></h4><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007520.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>0 - åªæ”¯æŒByteç±»å‹çš„</p><p>1 - String</p><p>2 - String</p><p>3 - Resource</p><p>4 - ResourceRegion</p><p>5 - DOMSource.*<em>class *</em> SAXSource.<strong>class</strong>) \ StAXSource.**class **StreamSource.**class **Source.<strong>class</strong></p><p><strong>6 -</strong> MultiValueMap</p><p>7 - <strong>true</strong></p><p><strong>8 - true</strong></p><p><strong>9 - æ”¯æŒæ³¨è§£æ–¹å¼xmlå¤„ç†çš„ã€‚</strong></p><p>æœ€ç»ˆ MappingJackson2HttpMessageConverter æŠŠå¯¹è±¡è½¬ä¸ºJSONï¼ˆåˆ©ç”¨åº•å±‚çš„jacksonçš„objectMapperè½¬æ¢çš„ï¼‰</p><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070010543.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_2ã€å†…å®¹åå•†" tabindex="-1"><a class="header-anchor" href="#_2ã€å†…å®¹åå•†"><span>2ã€å†…å®¹åå•†</span></a></h2><p>æ ¹æ®å®¢æˆ·ç«¯æ¥æ”¶èƒ½åŠ›ä¸åŒï¼Œè¿”å›ä¸åŒåª’ä½“ç±»å‹çš„æ•°æ®ã€‚</p><h3 id="_1ã€å¼•å…¥xmlä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1ã€å¼•å…¥xmlä¾èµ–"><span>1ã€å¼•å…¥xmlä¾èµ–</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.dataformat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-dataformat-xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€postmanåˆ†åˆ«æµ‹è¯•è¿”å›jsonå’Œxml" tabindex="-1"><a class="header-anchor" href="#_2ã€postmanåˆ†åˆ«æµ‹è¯•è¿”å›jsonå’Œxml"><span>2ã€postmanåˆ†åˆ«æµ‹è¯•è¿”å›jsonå’Œxml</span></a></h3><p>åªéœ€è¦æ”¹å˜è¯·æ±‚å¤´ä¸­Acceptå­—æ®µã€‚Httpåè®®ä¸­è§„å®šçš„ï¼Œå‘Šè¯‰æœåŠ¡å™¨æœ¬å®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„æ•°æ®ç±»å‹ã€‚</p><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007522.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_3ã€å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#_3ã€å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½"><span>3ã€å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½</span></a></h3><p>ä¸ºäº†æ–¹ä¾¿å†…å®¹åå•†ï¼Œå¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½ã€‚</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">contentnegotiation</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">favor-parameter</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment">#å¼€å¯è¯·æ±‚å‚æ•°å†…å®¹åå•†æ¨¡å¼</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘è¯·æ±‚ï¼š http://localhost:8080/test/person?format=json</p><p><a href="http://localhost:8080/test/person?format=json" target="_blank" rel="noopener noreferrer">http://localhost:8080/test/person?format=</a>xml</p><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070010279.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç¡®å®šå®¢æˆ·ç«¯æ¥æ”¶ä»€ä¹ˆæ ·çš„å†…å®¹ç±»å‹ï¼›</p><p>1ã€Parameterç­–ç•¥ä¼˜å…ˆç¡®å®šæ˜¯è¦è¿”å›jsonæ•°æ®ï¼ˆè·å–è¯·æ±‚å¤´ä¸­çš„formatçš„å€¼ï¼‰</p><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007101.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>2ã€æœ€ç»ˆè¿›è¡Œå†…å®¹åå•†è¿”å›ç»™å®¢æˆ·ç«¯jsonå³å¯ã€‚</p><h3 id="_4ã€å†…å®¹åå•†åŸç†" tabindex="-1"><a class="header-anchor" href="#_4ã€å†…å®¹åå•†åŸç†"><span>4ã€å†…å®¹åå•†åŸç†</span></a></h3><ul><li><p>1ã€åˆ¤æ–­å½“å‰å“åº”å¤´ä¸­æ˜¯å¦å·²ç»æœ‰ç¡®å®šçš„åª’ä½“ç±»å‹ã€‚MediaType</p></li><li><p><strong>2ã€è·å–å®¢æˆ·ç«¯ï¼ˆPostManã€æµè§ˆå™¨ï¼‰æ”¯æŒæ¥æ”¶çš„å†…å®¹ç±»å‹ã€‚ï¼ˆè·å–å®¢æˆ·ç«¯Acceptè¯·æ±‚å¤´å­—æ®µï¼‰ã€application/xmlã€‘</strong></p></li><li><ul><li><strong>contentNegotiationManager å†…å®¹åå•†ç®¡ç†å™¨ é»˜è®¤ä½¿ç”¨åŸºäºè¯·æ±‚å¤´çš„ç­–ç•¥</strong></li><li><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070010060.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li><li><strong>HeaderContentNegotiationStrategy ç¡®å®šå®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„å†…å®¹ç±»å‹</strong></li><li><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007211.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ul></li><li><p>3ã€éå†å¾ªç¯æ‰€æœ‰å½“å‰ç³»ç»Ÿçš„ <strong>MessageConverter</strong>ï¼Œçœ‹è°æ”¯æŒæ“ä½œè¿™ä¸ªå¯¹è±¡ï¼ˆPersonï¼‰</p></li><li><p>4ã€æ‰¾åˆ°æ”¯æŒæ“ä½œPersonçš„converterï¼ŒæŠŠconverteræ”¯æŒçš„åª’ä½“ç±»å‹ç»Ÿè®¡å‡ºæ¥ã€‚</p></li><li><p>5ã€å®¢æˆ·ç«¯éœ€è¦ã€application/xmlã€‘ã€‚æœåŠ¡ç«¯èƒ½åŠ›ã€10ç§ã€jsonã€xmlã€‘</p></li><li><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070010385.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p>6ã€è¿›è¡Œå†…å®¹åå•†çš„æœ€ä½³åŒ¹é…åª’ä½“ç±»å‹</p></li><li><p>7ã€ç”¨ æ”¯æŒ å°†å¯¹è±¡è½¬ä¸º æœ€ä½³åŒ¹é…åª’ä½“ç±»å‹ çš„converterã€‚è°ƒç”¨å®ƒè¿›è¡Œè½¬åŒ– ã€‚</p></li></ul><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007354.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å¯¼å…¥äº†jacksonå¤„ç†xmlçš„åŒ…ï¼Œxmlçš„converterå°±ä¼šè‡ªåŠ¨è¿›æ¥</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token class-name">WebMvcConfigurationSupport</span></span>
<span class="line">jackson2XmlPresent <span class="token operator">=</span> <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token string">&quot;com.fasterxml.jackson.dataformat.xml.XmlMapper&quot;</span><span class="token punctuation">,</span> classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>jackson2XmlPresent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token class-name">Jackson2ObjectMapperBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">Jackson2ObjectMapperBuilder</span><span class="token punctuation">.</span><span class="token function">xml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				builder<span class="token punctuation">.</span><span class="token function">applicationContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			messageConverters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MappingJackson2XmlHttpMessageConverter</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_5ã€è‡ªå®šä¹‰-messageconverter" tabindex="-1"><a class="header-anchor" href="#_5ã€è‡ªå®šä¹‰-messageconverter"><span>5ã€è‡ªå®šä¹‰ MessageConverter</span></a></h3><p><strong>å®ç°å¤šåè®®æ•°æ®å…¼å®¹ã€‚jsonã€xmlã€x-guigu</strong></p><p><strong>0ã€</strong>@ResponseBody å“åº”æ•°æ®å‡ºå» è°ƒç”¨ <strong>RequestResponseBodyMethodProcessor</strong> å¤„ç†</p><p>1ã€Processor å¤„ç†æ–¹æ³•è¿”å›å€¼ã€‚é€šè¿‡ <strong>MessageConverter</strong> å¤„ç†</p><p>2ã€æ‰€æœ‰ <strong>MessageConverter</strong> åˆèµ·æ¥å¯ä»¥æ”¯æŒå„ç§åª’ä½“ç±»å‹æ•°æ®çš„æ“ä½œï¼ˆè¯»ã€å†™ï¼‰</p><p>3ã€å†…å®¹åå•†æ‰¾åˆ°æœ€ç»ˆçš„ <strong>messageConverter</strong>ï¼›</p><p>SpringMVCçš„ä»€ä¹ˆåŠŸèƒ½ã€‚ä¸€ä¸ªå…¥å£ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ª WebMvcConfigurer</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"> <span class="token annotation punctuation">@Bean</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token function">webMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">            <span class="token annotation punctuation">@Override</span></span>
<span class="line">            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">extendMessageConverters</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HttpMessageConverter</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> converters<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007412.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007824.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>æœ‰å¯èƒ½æˆ‘ä»¬æ·»åŠ çš„è‡ªå®šä¹‰çš„åŠŸèƒ½ä¼šè¦†ç›–é»˜è®¤å¾ˆå¤šåŠŸèƒ½ï¼Œå¯¼è‡´ä¸€äº›é»˜è®¤çš„åŠŸèƒ½å¤±æ•ˆã€‚</strong></p><p><strong>å¤§å®¶è€ƒè™‘ï¼Œä¸Šè¿°åŠŸèƒ½é™¤äº†æˆ‘ä»¬å®Œå…¨è‡ªå®šä¹‰å¤–ï¼ŸSpringBootæœ‰æ²¡æœ‰ä¸ºæˆ‘ä»¬æä¾›åŸºäºé…ç½®æ–‡ä»¶çš„å¿«é€Ÿä¿®æ”¹åª’ä½“ç±»å‹åŠŸèƒ½ï¼Ÿæ€ä¹ˆé…ç½®å‘¢ï¼Ÿã€æç¤ºï¼šå‚ç…§SpringBootå®˜æ–¹æ–‡æ¡£webå¼€å‘å†…å®¹åå•†ç« èŠ‚ã€‘</strong></p><h1 id="_5ã€è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“" tabindex="-1"><a class="header-anchor" href="#_5ã€è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“"><span>5ã€è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“</span></a></h1><p>è§†å›¾è§£æï¼š<strong>SpringBooté»˜è®¤ä¸æ”¯æŒ JSPï¼Œéœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡æ¿å¼•æ“æŠ€æœ¯å®ç°é¡µé¢æ¸²æŸ“ã€‚</strong></p><h2 id="_1ã€è§†å›¾è§£æ" tabindex="-1"><a class="header-anchor" href="#_1ã€è§†å›¾è§£æ"><span>1ã€è§†å›¾è§£æ</span></a></h2><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007005.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_1ã€è§†å›¾è§£æåŸç†æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_1ã€è§†å›¾è§£æåŸç†æµç¨‹"><span>1ã€è§†å›¾è§£æåŸç†æµç¨‹</span></a></h3><p>1ã€ç›®æ ‡æ–¹æ³•å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šè¢«æ”¾åœ¨ <strong>ModelAndViewContainer é‡Œé¢ã€‚åŒ…æ‹¬æ•°æ®å’Œè§†å›¾åœ°å€</strong></p><p><strong>2ã€æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡ï¼ˆä»è¯·æ±‚å‚æ•°ä¸­ç¡®å®šçš„ï¼‰ï¼ŒæŠŠä»–é‡æ–°æ”¾åœ¨</strong> <strong>ModelAndViewContainer</strong></p><p><strong>3ã€ä»»ä½•ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆä»¥åéƒ½ä¼šè¿”å› ModelAndViewï¼ˆ<strong><strong>æ•°æ®å’Œè§†å›¾åœ°å€</strong></strong>ï¼‰ã€‚</strong></p><p>**4ã€**<strong>processDispatchResult å¤„ç†æ´¾å‘ç»“æœï¼ˆé¡µé¢æ”¹å¦‚ä½•å“åº”ï¼‰</strong></p><ul><li><p>1ã€<strong>render</strong>(<strong>mv</strong>, request, response); è¿›è¡Œé¡µé¢æ¸²æŸ“é€»è¾‘</p></li><li><ul><li>1ã€æ ¹æ®æ–¹æ³•çš„Stringè¿”å›å€¼å¾—åˆ° <strong>View</strong> å¯¹è±¡ã€å®šä¹‰äº†é¡µé¢çš„æ¸²æŸ“é€»è¾‘ã€‘</li></ul></li><li><ul><li><ul><li>1ã€æ‰€æœ‰çš„è§†å›¾è§£æå™¨å°è¯•æ˜¯å¦èƒ½æ ¹æ®å½“å‰è¿”å›å€¼å¾—åˆ°<strong>View</strong>å¯¹è±¡</li><li>2ã€å¾—åˆ°äº† <strong>redirect:/main.html</strong> --&gt; Thymeleaf new <strong>RedirectView</strong>()</li><li>3ã€ContentNegotiationViewResolver é‡Œé¢åŒ…å«äº†ä¸‹é¢æ‰€æœ‰çš„è§†å›¾è§£æå™¨ï¼Œå†…éƒ¨è¿˜æ˜¯åˆ©ç”¨ä¸‹é¢æ‰€æœ‰è§†å›¾è§£æå™¨å¾—åˆ°è§†å›¾å¯¹è±¡ã€‚</li><li>4ã€view.render(mv.getModelInternal(), request, response); è§†å›¾å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰çš„renderè¿›è¡Œé¡µé¢æ¸²æŸ“å·¥ä½œ</li></ul></li></ul></li><li><ul><li><ul><li><ul><li><strong>RedirectView å¦‚ä½•æ¸²æŸ“ã€é‡å®šå‘åˆ°ä¸€ä¸ªé¡µé¢ã€‘</strong></li><li><strong>1ã€è·å–ç›®æ ‡urlåœ°å€</strong></li><li>**2ã€**<strong>response.sendRedirect(encodedURL);</strong></li></ul></li></ul></li></ul></li></ul><p><strong>è§†å›¾è§£æï¼š</strong></p><ul><li><ul><li><strong>è¿”å›å€¼ä»¥ forward: å¼€å§‹ï¼š new InternalResourceView(forwardUrl); --&gt; è½¬å‘****request.getRequestDispatcher(path).forward(request, response);</strong></li><li><strong>è¿”å›å€¼ä»¥</strong> <strong>redirect: å¼€å§‹ï¼š</strong> <strong>new RedirectView() --ã€‹ renderå°±æ˜¯é‡å®šå‘</strong></li><li><strong>è¿”å›å€¼æ˜¯æ™®é€šå­—ç¬¦ä¸²ï¼š new ThymeleafViewï¼ˆï¼‰---&gt;</strong></li></ul></li></ul><p>è‡ªå®šä¹‰è§†å›¾è§£æå™¨+è‡ªå®šä¹‰è§†å›¾ï¼› <strong>å¤§å‚å­¦é™¢ã€‚</strong></p><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070010170.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007982.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007265.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007357.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_2ã€æ¨¡æ¿å¼•æ“-thymeleaf" tabindex="-1"><a class="header-anchor" href="#_2ã€æ¨¡æ¿å¼•æ“-thymeleaf"><span>2ã€æ¨¡æ¿å¼•æ“-Thymeleaf</span></a></h2><h3 id="_1ã€thymeleafç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_1ã€thymeleafç®€ä»‹"><span>1ã€thymeleafç®€ä»‹</span></a></h3><p>Thymeleaf is a modern server-side Java template engine for both web and standalone environments, capable of processing HTML, XML, JavaScript, CSS and even plain text.</p><p><strong>ç°ä»£åŒ–ã€æœåŠ¡ç«¯Javaæ¨¡æ¿å¼•æ“</strong></p><h3 id="_2ã€åŸºæœ¬è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#_2ã€åŸºæœ¬è¯­æ³•"><span>2ã€åŸºæœ¬è¯­æ³•</span></a></h3><h4 id="_1ã€è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#_1ã€è¡¨è¾¾å¼"><span>1ã€è¡¨è¾¾å¼</span></a></h4><table><thead><tr><th>è¡¨è¾¾å¼åå­—</th><th>è¯­æ³•</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>å˜é‡å–å€¼</td><td css-module=".">$</td><td>è·å–è¯·æ±‚åŸŸã€sessionåŸŸã€å¯¹è±¡ç­‰å€¼</td></tr><tr><td>é€‰æ‹©å˜é‡</td><td css-module=".">*</td><td>è·å–ä¸Šä¸‹æ–‡å¯¹è±¡å€¼</td></tr><tr><td>æ¶ˆæ¯</td><td css-module=".">#</td><td>è·å–å›½é™…åŒ–ç­‰å€¼</td></tr><tr><td>é“¾æ¥</td><td css-module=".">@</td><td>ç”Ÿæˆé“¾æ¥</td></tr><tr><td>ç‰‡æ®µè¡¨è¾¾å¼</td><td css-module=".">~</td><td>jsp:include ä½œç”¨ï¼Œå¼•å…¥å…¬å…±é¡µé¢ç‰‡æ®µ</td></tr></tbody></table><h4 id="_2ã€å­—é¢é‡" tabindex="-1"><a class="header-anchor" href="#_2ã€å­—é¢é‡"><span>2ã€å­—é¢é‡</span></a></h4><p>æ–‡æœ¬å€¼: <strong>&#39;one text&#39;</strong> <strong>,</strong> <strong>&#39;Another one!&#39;</strong> **,â€¦**æ•°å­—: <strong>0</strong> <strong>,</strong> <strong>34</strong> <strong>,</strong> <strong>3.0</strong> <strong>,</strong> <strong>12.3</strong> **,â€¦**å¸ƒå°”å€¼: <strong>true</strong> <strong>,</strong> <strong>false</strong></p><p>ç©ºå€¼: <strong>null</strong></p><p>å˜é‡ï¼š oneï¼Œtwoï¼Œ.... å˜é‡ä¸èƒ½æœ‰ç©ºæ ¼</p><h4 id="_3ã€æ–‡æœ¬æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_3ã€æ–‡æœ¬æ“ä½œ"><span>3ã€æ–‡æœ¬æ“ä½œ</span></a></h4><p>å­—ç¬¦ä¸²æ‹¼æ¥: <strong>+</strong></p><p>å˜é‡æ›¿æ¢: <strong>|The name is ${name}|</strong></p><h4 id="_4ã€æ•°å­¦è¿ç®—" tabindex="-1"><a class="header-anchor" href="#_4ã€æ•°å­¦è¿ç®—"><span>4ã€æ•°å­¦è¿ç®—</span></a></h4><p>è¿ç®—ç¬¦: + , - , * , / , %</p><h4 id="_5ã€å¸ƒå°”è¿ç®—" tabindex="-1"><a class="header-anchor" href="#_5ã€å¸ƒå°”è¿ç®—"><span>5ã€å¸ƒå°”è¿ç®—</span></a></h4><p>è¿ç®—ç¬¦: <strong>and</strong> <strong>,</strong> <strong>or</strong></p><p>ä¸€å…ƒè¿ç®—: <strong>!</strong> <strong>,</strong> <strong>not</strong></p><h4 id="_6ã€æ¯”è¾ƒè¿ç®—" tabindex="-1"><a class="header-anchor" href="#_6ã€æ¯”è¾ƒè¿ç®—"><span>6ã€æ¯”è¾ƒè¿ç®—</span></a></h4><p>æ¯”è¾ƒ: <strong>&gt;</strong> <strong>,</strong> <strong>&lt;</strong> <strong>,</strong> <strong>&gt;=</strong> <strong>,</strong> <strong>&lt;=</strong> <strong>(</strong> <strong>gt</strong> <strong>,</strong> <strong>lt</strong> <strong>,</strong> <strong>ge</strong> <strong>,</strong> <strong>le</strong> **)**ç­‰å¼: <strong>==</strong> <strong>,</strong> <strong>!=</strong> <strong>(</strong> <strong>eq</strong> <strong>,</strong> <strong>ne</strong> <strong>)</strong></p><h4 id="_7ã€æ¡ä»¶è¿ç®—" tabindex="-1"><a class="header-anchor" href="#_7ã€æ¡ä»¶è¿ç®—"><span>7ã€æ¡ä»¶è¿ç®—</span></a></h4><p>If-then: <strong>(if) ? (then)</strong></p><p>If-then-else: <strong>(if) ? (then) : (else)</strong></p><p>Default: (value) <strong>?: (defaultvalue)</strong></p><h4 id="_8ã€ç‰¹æ®Šæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_8ã€ç‰¹æ®Šæ“ä½œ"><span>8ã€ç‰¹æ®Šæ“ä½œ</span></a></h4><p>æ— æ“ä½œï¼š _</p><h3 id="_3ã€è®¾ç½®å±æ€§å€¼-th-attr" tabindex="-1"><a class="header-anchor" href="#_3ã€è®¾ç½®å±æ€§å€¼-th-attr"><span>3ã€è®¾ç½®å±æ€§å€¼-th:attr</span></a></h3><p>è®¾ç½®å•ä¸ªå€¼</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subscribe.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action=@{/subscribe}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Subscribe!<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value=#{subscribe.submit}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¾ç½®å¤šä¸ªå€¼</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../images/gtvglogo.png<span class="token punctuation">&quot;</span></span>  <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>src=@{/images/gtvglogo.png},title=#{logo},alt=#{logo}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä»¥ä¸Šä¸¤ä¸ªçš„ä»£æ›¿å†™æ³• th:xxxx</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Subscribe!<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{subscribe.submit}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subscribe.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/subscribe}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€æœ‰h5å…¼å®¹çš„æ ‡ç­¾å†™æ³•</p><p>https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-value-to-specific-attributes</p><h3 id="_4ã€è¿­ä»£" tabindex="-1"><a class="header-anchor" href="#_4ã€è¿­ä»£"><span>4ã€è¿­ä»£</span></a></h3><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prod : ${prods}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.price}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prod,iterStat : ${prods}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${iterStat.odd}? &#39;odd&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.price}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5ã€æ¡ä»¶è¿ç®—" tabindex="-1"><a class="header-anchor" href="#_5ã€æ¡ä»¶è¿ç®—"><span>5ã€æ¡ä»¶è¿ç®—</span></a></h3><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comments.html<span class="token punctuation">&quot;</span></span></span>
<span class="line"><span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/product/comments(prodId=${prod.id})}<span class="token punctuation">&quot;</span></span></span>
<span class="line"><span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${not #lists.isEmpty(prod.comments)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>switch</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${user.role}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>admin&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User is an administrator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{roles.manager}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User is a manager<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User is some other thing<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="-6" tabindex="-1"><a class="header-anchor" href="#-6"><span></span></a></h1><h3 id="_6ã€å±æ€§ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#_6ã€å±æ€§ä¼˜å…ˆçº§"><span>6ã€å±æ€§ä¼˜å…ˆçº§</span></a></h3><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070010694.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="-7" tabindex="-1"><a class="header-anchor" href="#-7"><span></span></a></h1><h2 id="_3ã€thymeleafä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_3ã€thymeleafä½¿ç”¨"><span>3ã€thymeleafä½¿ç”¨</span></a></h2><h4 id="_1ã€å¼•å…¥starter" tabindex="-1"><a class="header-anchor" href="#_1ã€å¼•å…¥starter"><span>1ã€å¼•å…¥Starter</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>thymeleaf<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2ã€è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf" tabindex="-1"><a class="header-anchor" href="#_2ã€è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf"><span>2ã€è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">ThymeleafProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">TemplateMode</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">SpringTemplateEngine</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">WebMvcAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebFluxAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThymeleafAutoConfiguration</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="-8" tabindex="-1"><a class="header-anchor" href="#-8"><span></span></a></h1><p>è‡ªåŠ¨é…å¥½çš„ç­–ç•¥</p><ul><li>1ã€æ‰€æœ‰thymeleafçš„é…ç½®å€¼éƒ½åœ¨ ThymeleafProperties</li><li>2ã€é…ç½®å¥½äº† <strong>SpringTemplateEngine</strong></li><li><strong>3ã€é…å¥½äº†</strong> <strong>ThymeleafViewResolver</strong></li><li>4ã€æˆ‘ä»¬åªéœ€è¦ç›´æ¥å¼€å‘é¡µé¢</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">DEFAULT_PREFIX</span> <span class="token operator">=</span> <span class="token string">&quot;classpath:/templates/&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">DEFAULT_SUFFIX</span> <span class="token operator">=</span> <span class="token string">&quot;.html&quot;</span><span class="token punctuation">;</span>  <span class="token comment">//xxx.html</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3ã€é¡µé¢å¼€å‘" tabindex="-1"><a class="header-anchor" href="#_3ã€é¡µé¢å¼€å‘"><span>3ã€é¡µé¢å¼€å‘</span></a></h4><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span> xmlns<span class="token operator">:</span>th<span class="token operator">=</span><span class="token string">&quot;http://www.thymeleaf.org&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span><span class="token class-name">Title</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span></span>
<span class="line"><span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token operator">&lt;</span>h1 th<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">&quot;${msg}&quot;</span><span class="token operator">&gt;</span>å“ˆå“ˆ<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span></span>
<span class="line"><span class="token generics"><span class="token punctuation">&lt;</span>h2<span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;www.atguigu.com&quot;</span> th<span class="token operator">:</span>href<span class="token operator">=</span><span class="token string">&quot;${link}&quot;</span><span class="token operator">&gt;</span>å»ç™¾åº¦<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;www.atguigu.com&quot;</span> th<span class="token operator">:</span>href<span class="token operator">=</span><span class="token string">&quot;@{link}&quot;</span><span class="token operator">&gt;</span>å»ç™¾åº¦<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="_4ã€æ„å»ºåå°ç®¡ç†ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#_4ã€æ„å»ºåå°ç®¡ç†ç³»ç»Ÿ"><span>4ã€æ„å»ºåå°ç®¡ç†ç³»ç»Ÿ</span></a></h2><h3 id="_1ã€é¡¹ç›®åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#_1ã€é¡¹ç›®åˆ›å»º"><span>1ã€é¡¹ç›®åˆ›å»º</span></a></h3><p>thymeleafã€web-starterã€devtoolsã€lombok</p><h3 id="_2ã€é™æ€èµ„æºå¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2ã€é™æ€èµ„æºå¤„ç†"><span>2ã€é™æ€èµ„æºå¤„ç†</span></a></h3><p>è‡ªåŠ¨é…ç½®å¥½ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ‰€æœ‰é™æ€èµ„æºæ”¾åˆ° static æ–‡ä»¶å¤¹ä¸‹</p><h3 id="_3ã€è·¯å¾„æ„å»º" tabindex="-1"><a class="header-anchor" href="#_3ã€è·¯å¾„æ„å»º"><span>3ã€è·¯å¾„æ„å»º</span></a></h3><p>th:action=&quot;@{/login}&quot;</p><h3 id="_4ã€æ¨¡æ¿æŠ½å–" tabindex="-1"><a class="header-anchor" href="#_4ã€æ¨¡æ¿æŠ½å–"><span>4ã€æ¨¡æ¿æŠ½å–</span></a></h3><p>th:insert/replace/include</p><h3 id="_5ã€é¡µé¢è·³è½¬" tabindex="-1"><a class="header-anchor" href="#_5ã€é¡µé¢è·³è½¬"><span>5ã€é¡µé¢è·³è½¬</span></a></h3><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line">    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasLength</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">//æŠŠç™»é™†æˆåŠŸçš„ç”¨æˆ·ä¿å­˜èµ·æ¥</span></span>
<span class="line">            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;loginUser&quot;</span><span class="token punctuation">,</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//ç™»å½•æˆåŠŸé‡å®šå‘åˆ°main.html;  é‡å®šå‘é˜²æ­¢è¡¨å•é‡å¤æäº¤</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token string">&quot;redirect:/main.html&quot;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;è´¦å·å¯†ç é”™è¯¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//å›åˆ°ç™»å½•é¡µé¢</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_6ã€æ•°æ®æ¸²æŸ“" tabindex="-1"><a class="header-anchor" href="#_6ã€æ•°æ®æ¸²æŸ“"><span>6ã€æ•°æ®æ¸²æŸ“</span></a></h3><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line">    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/dynamic_table&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">dynamic_table</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//è¡¨æ ¼å†…å®¹çš„éå†</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123444&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;haha&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;aaaaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;hehe &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;aaddd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">,</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;table/dynamic_table&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">&lt;</span>table <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;display table table-bordered&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;hidden-table-info&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token generics"><span class="token punctuation">&lt;</span>thead<span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token generics"><span class="token punctuation">&lt;</span>tr<span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token generics"><span class="token punctuation">&lt;</span>th<span class="token punctuation">&gt;</span></span>#<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token generics"><span class="token punctuation">&lt;</span>th<span class="token punctuation">&gt;</span></span>ç”¨æˆ·å<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token generics"><span class="token punctuation">&lt;</span>th<span class="token punctuation">&gt;</span></span>å¯†ç <span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token generics"><span class="token punctuation">&lt;</span>tbody<span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token operator">&lt;</span>tr <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;gradeX&quot;</span> th<span class="token operator">:</span>each<span class="token operator">=</span><span class="token string">&quot;user,stats:${users}&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>td th<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">&quot;${stats.count}&quot;</span><span class="token operator">&gt;</span><span class="token class-name">Trident</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>td th<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">&quot;${user.userName}&quot;</span><span class="token operator">&gt;</span><span class="token class-name">Internet</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token generics"><span class="token punctuation">&lt;</span>td <span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">[</span>$<span class="token punctuation">{</span>user<span class="token punctuation">.</span>password<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h1 id="_6ã€æ‹¦æˆªå™¨" tabindex="-1"><a class="header-anchor" href="#_6ã€æ‹¦æˆªå™¨"><span>6ã€æ‹¦æˆªå™¨</span></a></h1><h2 id="_1ã€handlerinterceptor-æ¥å£" tabindex="-1"><a class="header-anchor" href="#_1ã€handlerinterceptor-æ¥å£"><span>1ã€HandlerInterceptor æ¥å£</span></a></h2><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * ç™»å½•æ£€æŸ¥</span>
<span class="line"> * 1ã€é…ç½®å¥½æ‹¦æˆªå™¨è¦æ‹¦æˆªå“ªäº›è¯·æ±‚</span>
<span class="line"> * 2ã€æŠŠè¿™äº›é…ç½®æ”¾åœ¨å®¹å™¨ä¸­</span>
<span class="line"> */</span></span>
<span class="line"><span class="token annotation punctuation">@Slf4j</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰</span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">request</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">response</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">handler</span></span>
<span class="line">     * <span class="token keyword">@return</span></span>
<span class="line">     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span></span>
<span class="line">     */</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">String</span> requestURI <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;preHandleæ‹¦æˆªçš„è¯·æ±‚è·¯å¾„æ˜¯{}&quot;</span><span class="token punctuation">,</span>requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">//ç™»å½•æ£€æŸ¥é€»è¾‘</span></span>
<span class="line">        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Object</span> loginUser <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;loginUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span>loginUser <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">//æ”¾è¡Œ</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">//æ‹¦æˆªä½ã€‚æœªç™»å½•ã€‚è·³è½¬åˆ°ç™»å½•é¡µ</span></span>
<span class="line">        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;è¯·å…ˆç™»å½•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//        re.sendRedirect(&quot;/&quot;);</span></span>
<span class="line">        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆä»¥å</span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">request</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">response</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">handler</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">modelAndView</span></span>
<span class="line">     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span></span>
<span class="line">     */</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;postHandleæ‰§è¡Œ{}&quot;</span><span class="token punctuation">,</span>modelAndView<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * é¡µé¢æ¸²æŸ“ä»¥å</span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">request</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">response</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">handler</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">ex</span></span>
<span class="line">     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span></span>
<span class="line">     */</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;afterCompletionæ‰§è¡Œå¼‚å¸¸{}&quot;</span><span class="token punctuation">,</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="_2ã€é…ç½®æ‹¦æˆªå™¨" tabindex="-1"><a class="header-anchor" href="#_2ã€é…ç½®æ‹¦æˆªå™¨"><span>2ã€é…ç½®æ‹¦æˆªå™¨</span></a></h2><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * 1ã€ç¼–å†™ä¸€ä¸ªæ‹¦æˆªå™¨å®ç°HandlerInterceptoræ¥å£</span>
<span class="line"> * 2ã€æ‹¦æˆªå™¨æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼ˆå®ç°WebMvcConfigurerçš„addInterceptorsï¼‰</span>
<span class="line"> * 3ã€æŒ‡å®šæ‹¦æˆªè§„åˆ™ã€å¦‚æœæ˜¯æ‹¦æˆªæ‰€æœ‰ï¼Œé™æ€èµ„æºä¹Ÿä¼šè¢«æ‹¦æˆªã€‘</span>
<span class="line"> */</span></span>
<span class="line"><span class="token annotation punctuation">@Configuration</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminWebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LoginInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//æ‰€æœ‰è¯·æ±‚éƒ½è¢«æ‹¦æˆªåŒ…æ‹¬é™æ€èµ„æº</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/css/**&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/fonts/**&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/images/**&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/js/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ”¾è¡Œçš„è¯·æ±‚</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="_3ã€æ‹¦æˆªå™¨åŸç†" tabindex="-1"><a class="header-anchor" href="#_3ã€æ‹¦æˆªå™¨åŸç†"><span>3ã€æ‹¦æˆªå™¨åŸç†</span></a></h2><p>1ã€æ ¹æ®å½“å‰è¯·æ±‚ï¼Œæ‰¾åˆ°**HandlerExecutionChainã€**å¯ä»¥å¤„ç†è¯·æ±‚çš„handlerä»¥åŠhandlerçš„æ‰€æœ‰ æ‹¦æˆªå™¨ã€‘</p><p>2ã€å…ˆæ¥<strong>é¡ºåºæ‰§è¡Œ</strong> æ‰€æœ‰æ‹¦æˆªå™¨çš„ preHandleæ–¹æ³•</p><ul><li>1ã€å¦‚æœå½“å‰æ‹¦æˆªå™¨prehandlerè¿”å›ä¸ºtrueã€‚åˆ™æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨çš„preHandle</li><li>2ã€å¦‚æœå½“å‰æ‹¦æˆªå™¨è¿”å›ä¸ºfalseã€‚ç›´æ¥ å€’åºæ‰§è¡Œæ‰€æœ‰å·²ç»æ‰§è¡Œäº†çš„æ‹¦æˆªå™¨çš„ afterCompletionï¼›</li></ul><p><strong>3ã€å¦‚æœä»»ä½•ä¸€ä¸ªæ‹¦æˆªå™¨è¿”å›falseã€‚ç›´æ¥è·³å‡ºä¸æ‰§è¡Œç›®æ ‡æ–¹æ³•</strong></p><p><strong>4ã€æ‰€æœ‰æ‹¦æˆªå™¨éƒ½è¿”å›Trueã€‚æ‰§è¡Œç›®æ ‡æ–¹æ³•</strong></p><p><strong>5ã€å€’åºæ‰§è¡Œæ‰€æœ‰æ‹¦æˆªå™¨çš„postHandleæ–¹æ³•ã€‚</strong></p><p><strong>6ã€å‰é¢çš„æ­¥éª¤æœ‰ä»»ä½•å¼‚å¸¸éƒ½ä¼šç›´æ¥å€’åºè§¦å‘</strong> afterCompletion</p><p>7ã€é¡µé¢æˆåŠŸæ¸²æŸ“å®Œæˆä»¥åï¼Œä¹Ÿä¼šå€’åºè§¦å‘ afterCompletion</p><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007777.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070010772.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="_7ã€æ–‡ä»¶ä¸Šä¼ " tabindex="-1"><a class="header-anchor" href="#_7ã€æ–‡ä»¶ä¸Šä¼ "><span>7ã€æ–‡ä»¶ä¸Šä¼ </span></a></h1><h2 id="_1ã€é¡µé¢è¡¨å•" tabindex="-1"><a class="header-anchor" href="#_1ã€é¡µé¢è¡¨å•"><span>1ã€é¡µé¢è¡¨å•</span></a></h2><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/upload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æäº¤<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2ã€æ–‡ä»¶ä¸Šä¼ ä»£ç " tabindex="-1"><a class="header-anchor" href="#_2ã€æ–‡ä»¶ä¸Šä¼ ä»£ç "><span>2ã€æ–‡ä»¶ä¸Šä¼ ä»£ç </span></a></h2><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * MultipartFile è‡ªåŠ¨å°è£…ä¸Šä¼ è¿‡æ¥çš„æ–‡ä»¶</span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">email</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">username</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">headerImg</span></span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">photos</span></span>
<span class="line">     * <span class="token keyword">@return</span></span>
<span class="line">     */</span></span>
<span class="line">    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/upload&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> email<span class="token punctuation">,</span></span>
<span class="line">                         <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span></span>
<span class="line">                         <span class="token annotation punctuation">@RequestPart</span><span class="token punctuation">(</span><span class="token string">&quot;headerImg&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> headerImg<span class="token punctuation">,</span></span>
<span class="line">                         <span class="token annotation punctuation">@RequestPart</span><span class="token punctuation">(</span><span class="token string">&quot;photos&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span><span class="token punctuation">[</span><span class="token punctuation">]</span> photos<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸Šä¼ çš„ä¿¡æ¯ï¼šemail={}ï¼Œusername={}ï¼ŒheaderImg={}ï¼Œphotos={}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                email<span class="token punctuation">,</span>username<span class="token punctuation">,</span>headerImg<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>photos<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>headerImg<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">//ä¿å­˜åˆ°æ–‡ä»¶æœåŠ¡å™¨ï¼ŒOSSæœåŠ¡å™¨</span></span>
<span class="line">            <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> headerImg<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            headerImg<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;H:\\cache\\&quot;</span><span class="token operator">+</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span>photos<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> photo <span class="token operator">:</span> photos<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>photo<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                    <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> photo<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    photo<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;H:\\cache\\&quot;</span><span class="token operator">+</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="_3ã€è‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#_3ã€è‡ªåŠ¨é…ç½®åŸç†"><span>3ã€è‡ªåŠ¨é…ç½®åŸç†</span></a></h2><p>**æ–‡ä»¶ä¸Šä¼ è‡ªåŠ¨é…ç½®ç±»-MultipartAutoConfiguration-**<strong>MultipartProperties</strong></p><ul><li><p>è‡ªåŠ¨é…ç½®å¥½äº† <strong>StandardServletMultipartResolver ã€æ–‡ä»¶ä¸Šä¼ è§£æå™¨ã€‘</strong></p></li><li><p><strong>åŸç†æ­¥éª¤</strong></p></li><li><ul><li><strong>1ã€è¯·æ±‚è¿›æ¥ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ è§£æå™¨åˆ¤æ–­ï¼ˆ<strong>isMultipart</strong>ï¼‰å¹¶å°è£…ï¼ˆ<strong>resolveMultipartï¼Œ<strong>è¿”å›</strong>MultipartHttpServletRequest</strong>ï¼‰æ–‡ä»¶ä¸Šä¼ è¯·æ±‚</strong></li><li><strong>2ã€å‚æ•°è§£æå™¨æ¥è§£æè¯·æ±‚ä¸­çš„æ–‡ä»¶å†…å®¹å°è£…æˆMultipartFile</strong></li><li>**3ã€å°†requestä¸­æ–‡ä»¶ä¿¡æ¯å°è£…ä¸ºä¸€ä¸ªMapï¼›**MultiValueMap&lt;String, MultipartFile&gt;</li></ul></li></ul><p><strong>FileCopyUtils</strong>ã€‚å®ç°æ–‡ä»¶æµçš„æ‹·è´</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/upload&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> email<span class="token punctuation">,</span></span>
<span class="line">                         <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span></span>
<span class="line">                         <span class="token annotation punctuation">@RequestPart</span><span class="token punctuation">(</span><span class="token string">&quot;headerImg&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> headerImg<span class="token punctuation">,</span></span>
<span class="line">                         <span class="token annotation punctuation">@RequestPart</span><span class="token punctuation">(</span><span class="token string">&quot;photos&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span><span class="token punctuation">[</span><span class="token punctuation">]</span> photos<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007858.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="_8ã€å¼‚å¸¸å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_8ã€å¼‚å¸¸å¤„ç†"><span>8ã€å¼‚å¸¸å¤„ç†</span></a></h1><h2 id="_1ã€é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_1ã€é”™è¯¯å¤„ç†"><span>1ã€é”™è¯¯å¤„ç†</span></a></h2><h4 id="_1ã€é»˜è®¤è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_1ã€é»˜è®¤è§„åˆ™"><span>1ã€é»˜è®¤è§„åˆ™</span></a></h4><ul><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Bootæä¾›<code>/error</code>å¤„ç†æ‰€æœ‰é”™è¯¯çš„æ˜ å°„</p></li><li><p>å¯¹äºæœºå™¨å®¢æˆ·ç«¯ï¼Œå®ƒå°†ç”ŸæˆJSONå“åº”ï¼Œå…¶ä¸­åŒ…å«é”™è¯¯ï¼ŒHTTPçŠ¶æ€å’Œå¼‚å¸¸æ¶ˆæ¯çš„è¯¦ç»†ä¿¡æ¯ã€‚å¯¹äºæµè§ˆå™¨å®¢æˆ·ç«¯ï¼Œå“åº”ä¸€ä¸ªâ€œ whitelabelâ€é”™è¯¯è§†å›¾ï¼Œä»¥HTMLæ ¼å¼å‘ˆç°ç›¸åŒçš„æ•°æ®</p></li><li><p><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007992.png" alt="" loading="lazy"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606024616835-bc491bf0-c3b1-4ac3-b886-d4ff3c9874ce.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_28%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="" loading="lazy"></p></li><li><p><strong>è¦å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ï¼Œæ·»åŠ </strong><code>**View**</code><strong>è§£æä¸º</strong><code>**error**``** **</code></p></li><li><p>è¦å®Œå…¨æ›¿æ¢é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥å®ç° <code>ErrorController </code>å¹¶æ³¨å†Œè¯¥ç±»å‹çš„Beanå®šä¹‰ï¼Œæˆ–æ·»åŠ <code>ErrorAttributesç±»å‹çš„ç»„ä»¶</code>ä»¥ä½¿ç”¨ç°æœ‰æœºåˆ¶ä½†æ›¿æ¢å…¶å†…å®¹ã€‚</p></li><li><p>error/ä¸‹çš„4xxï¼Œ5xxé¡µé¢ä¼šè¢«è‡ªåŠ¨è§£æï¼›</p></li><li><ul><li><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070011086.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ul></li></ul><h4 id="_2ã€å®šåˆ¶é”™è¯¯å¤„ç†é€»è¾‘" tabindex="-1"><a class="header-anchor" href="#_2ã€å®šåˆ¶é”™è¯¯å¤„ç†é€»è¾‘"><span>2ã€å®šåˆ¶é”™è¯¯å¤„ç†é€»è¾‘</span></a></h4><ul><li><p>è‡ªå®šä¹‰é”™è¯¯é¡µ</p></li><li><ul><li>error/404.html error/5xx.htmlï¼›æœ‰ç²¾ç¡®çš„é”™è¯¯çŠ¶æ€ç é¡µé¢å°±åŒ¹é…ç²¾ç¡®ï¼Œæ²¡æœ‰å°±æ‰¾ 4xx.htmlï¼›å¦‚æœéƒ½æ²¡æœ‰å°±è§¦å‘ç™½é¡µ</li></ul></li><li><p>@ControllerAdvice+@ExceptionHandlerå¤„ç†å…¨å±€å¼‚å¸¸ï¼›åº•å±‚æ˜¯ <strong>ExceptionHandlerExceptionResolver æ”¯æŒçš„</strong></p></li><li><p>@ResponseStatus+è‡ªå®šä¹‰å¼‚å¸¸ ï¼›åº•å±‚æ˜¯ <strong>ResponseStatusExceptionResolver ï¼ŒæŠŠresponsestatusæ³¨è§£çš„ä¿¡æ¯åº•å±‚è°ƒç”¨</strong> <strong>response.sendError(statusCode, resolvedReason)ï¼›tomcatå‘é€çš„/error</strong></p></li><li><p>Springåº•å±‚çš„å¼‚å¸¸ï¼Œå¦‚ å‚æ•°ç±»å‹è½¬æ¢å¼‚å¸¸ï¼›<strong>DefaultHandlerExceptionResolver å¤„ç†æ¡†æ¶åº•å±‚çš„å¼‚å¸¸ã€‚</strong></p></li><li><ul><li>response.sendError(HttpServletResponse.<strong>SC_BAD_REQUEST</strong>, ex.getMessage());</li><li><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007986.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ul></li><li><p>è‡ªå®šä¹‰å®ç° HandlerExceptionResolver å¤„ç†å¼‚å¸¸ï¼›å¯ä»¥ä½œä¸ºé»˜è®¤çš„å…¨å±€å¼‚å¸¸å¤„ç†è§„åˆ™</p></li><li><ul><li><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070011822.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ul></li><li><p><strong>ErrorViewResolver</strong> å®ç°è‡ªå®šä¹‰å¤„ç†å¼‚å¸¸ï¼›</p></li><li><ul><li>response.sendError ã€‚errorè¯·æ±‚å°±ä¼šè½¬ç»™controller</li><li>ä½ çš„å¼‚å¸¸æ²¡æœ‰ä»»ä½•äººèƒ½å¤„ç†ã€‚tomcatåº•å±‚ response.sendErrorã€‚errorè¯·æ±‚å°±ä¼šè½¬ç»™controller</li><li><strong>basicErrorController è¦å»çš„é¡µé¢åœ°å€æ˜¯</strong> <strong>ErrorViewResolver</strong> ï¼›</li></ul></li></ul><h4 id="_3ã€å¼‚å¸¸å¤„ç†è‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#_3ã€å¼‚å¸¸å¤„ç†è‡ªåŠ¨é…ç½®åŸç†"><span>3ã€å¼‚å¸¸å¤„ç†è‡ªåŠ¨é…ç½®åŸç†</span></a></h4><ul><li><p><strong>ErrorMvcAutoConfiguration è‡ªåŠ¨é…ç½®å¼‚å¸¸å¤„ç†è§„åˆ™</strong></p></li><li><ul><li><strong>å®¹å™¨ä¸­çš„ç»„ä»¶ï¼šç±»å‹ï¼šDefaultErrorAttributes -&gt;</strong> <strong>idï¼šerrorAttributes</strong></li></ul></li><li><ul><li><ul><li><strong>public class</strong> <strong>DefaultErrorAttributes</strong> <strong>implements</strong> <strong>ErrorAttributes</strong>, <strong>HandlerExceptionResolver</strong></li><li><strong>DefaultErrorAttributes</strong>ï¼šå®šä¹‰é”™è¯¯é¡µé¢ä¸­å¯ä»¥åŒ…å«å“ªäº›æ•°æ®ã€‚</li><li><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007045.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li><li><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007038.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ul></li></ul></li><li><ul><li>**å®¹å™¨ä¸­çš„ç»„ä»¶ï¼šç±»å‹ï¼š**<strong>BasicErrorController --&gt; idï¼šbasicErrorControllerï¼ˆjson+ç™½é¡µ é€‚é…å“åº”ï¼‰</strong></li></ul></li><li><ul><li><ul><li><strong>å¤„ç†é»˜è®¤</strong> <strong>/error è·¯å¾„çš„è¯·æ±‚ï¼›é¡µé¢å“åº”</strong> <strong>new</strong> ModelAndView(<strong>&quot;error&quot;</strong>, model)ï¼›</li><li><strong>å®¹å™¨ä¸­æœ‰ç»„ä»¶ View</strong>-&gt;<strong>idæ˜¯error</strong>ï¼›ï¼ˆå“åº”é»˜è®¤é”™è¯¯é¡µï¼‰</li><li>å®¹å™¨ä¸­æ”¾ç»„ä»¶ <strong>BeanNameViewResolverï¼ˆè§†å›¾è§£æå™¨ï¼‰ï¼›æŒ‰ç…§è¿”å›çš„è§†å›¾åä½œä¸ºç»„ä»¶çš„idå»å®¹å™¨ä¸­æ‰¾Viewå¯¹è±¡ã€‚</strong></li></ul></li></ul></li><li><ul><li>**å®¹å™¨ä¸­çš„ç»„ä»¶ï¼š**ç±»å‹ï¼š**DefaultErrorViewResolver -&gt; idï¼š**conventionErrorViewResolver</li></ul></li><li><ul><li><ul><li>å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œä¼šä»¥HTTPçš„çŠ¶æ€ç  ä½œä¸ºè§†å›¾é¡µåœ°å€ï¼ˆviewNameï¼‰ï¼Œæ‰¾åˆ°çœŸæ­£çš„é¡µé¢</li><li>error/404ã€5xx.html</li></ul></li></ul></li></ul><p>å¦‚æœæƒ³è¦è¿”å›é¡µé¢ï¼›å°±ä¼šæ‰¾errorè§†å›¾ã€<strong>StaticView</strong>ã€‘ã€‚(é»˜è®¤æ˜¯ä¸€ä¸ªç™½é¡µ)</p><p><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070011077.png" alt="" loading="lazy">å†™å‡ºå»json</p><p><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007597.png" alt="" loading="lazy"> é”™è¯¯é¡µ</p><h4 id="_4ã€å¼‚å¸¸å¤„ç†æ­¥éª¤æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_4ã€å¼‚å¸¸å¤„ç†æ­¥éª¤æµç¨‹"><span>4ã€å¼‚å¸¸å¤„ç†æ­¥éª¤æµç¨‹</span></a></h4><p>1ã€æ‰§è¡Œç›®æ ‡æ–¹æ³•ï¼Œç›®æ ‡æ–¹æ³•è¿è¡ŒæœŸé—´æœ‰ä»»ä½•å¼‚å¸¸éƒ½ä¼šè¢«catchã€è€Œä¸”æ ‡å¿—å½“å‰è¯·æ±‚ç»“æŸï¼›å¹¶ä¸”ç”¨ <strong>dispatchException</strong></p><p>2ã€è¿›å…¥è§†å›¾è§£ææµç¨‹ï¼ˆé¡µé¢æ¸²æŸ“ï¼Ÿï¼‰</p><p>processDispatchResult(processedRequest, response, mappedHandler, <strong>mv</strong>, <strong>dispatchException</strong>);</p><p>3ã€<strong>mv</strong> = <strong>processHandlerException</strong>ï¼›å¤„ç†handlerå‘ç”Ÿçš„å¼‚å¸¸ï¼Œå¤„ç†å®Œæˆè¿”å›ModelAndViewï¼›</p><ul><li><p>1ã€éå†æ‰€æœ‰çš„ <strong>handlerExceptionResolversï¼Œçœ‹è°èƒ½å¤„ç†å½“å‰å¼‚å¸¸ã€<strong><strong>HandlerExceptionResolverå¤„ç†å™¨å¼‚å¸¸è§£æå™¨</strong></strong>ã€‘</strong></p></li><li><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070011579.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p><strong>2ã€ç³»ç»Ÿé»˜è®¤çš„ å¼‚å¸¸è§£æå™¨ï¼›</strong></p></li><li><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007616.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><ul><li><strong>1ã€DefaultErrorAttributeså…ˆæ¥å¤„ç†å¼‚å¸¸ã€‚æŠŠå¼‚å¸¸ä¿¡æ¯ä¿å­˜åˆ°rrequeståŸŸï¼Œå¹¶ä¸”è¿”å›nullï¼›</strong></li><li><strong>2ã€é»˜è®¤æ²¡æœ‰ä»»ä½•äººèƒ½å¤„ç†å¼‚å¸¸ï¼Œæ‰€ä»¥å¼‚å¸¸ä¼šè¢«æŠ›å‡º</strong></li></ul></li><li><ul><li><ul><li><strong>1ã€å¦‚æœæ²¡æœ‰ä»»ä½•äººèƒ½å¤„ç†æœ€ç»ˆåº•å±‚å°±ä¼šå‘é€ /error è¯·æ±‚ã€‚ä¼šè¢«åº•å±‚çš„BasicErrorControllerå¤„ç†</strong></li><li><strong>2ã€è§£æé”™è¯¯è§†å›¾ï¼›éå†æ‰€æœ‰çš„</strong> <strong>ErrorViewResolver çœ‹è°èƒ½è§£æã€‚</strong></li><li><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007676.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li><li><strong>3ã€é»˜è®¤çš„</strong> <strong>DefaultErrorViewResolver ,ä½œç”¨æ˜¯æŠŠå“åº”çŠ¶æ€ç ä½œä¸ºé”™è¯¯é¡µçš„åœ°å€ï¼Œerror/500.html</strong></li><li><strong>4ã€æ¨¡æ¿å¼•æ“æœ€ç»ˆå“åº”è¿™ä¸ªé¡µé¢</strong> <strong>error/500.html</strong></li></ul></li></ul></li></ul><h1 id="_9ã€webåŸç”Ÿç»„ä»¶æ³¨å…¥-servletã€filterã€listener" tabindex="-1"><a class="header-anchor" href="#_9ã€webåŸç”Ÿç»„ä»¶æ³¨å…¥-servletã€filterã€listener"><span>9ã€WebåŸç”Ÿç»„ä»¶æ³¨å…¥ï¼ˆServletã€Filterã€Listenerï¼‰</span></a></h1><h2 id="_1ã€ä½¿ç”¨servlet-api" tabindex="-1"><a class="header-anchor" href="#_1ã€ä½¿ç”¨servlet-api"><span>1ã€ä½¿ç”¨Servlet API</span></a></h2><p>@ServletComponentScan(basePackages = <strong>&quot;com.atguigu.admin&quot;</strong>) :æŒ‡å®šåŸç”ŸServletç»„ä»¶éƒ½æ”¾åœ¨é‚£é‡Œ</p><p>@WebServlet(urlPatterns = <strong>&quot;/my&quot;</strong>)ï¼šæ•ˆæœï¼šç›´æ¥å“åº”ï¼Œ<strong>æ²¡æœ‰ç»è¿‡Springçš„æ‹¦æˆªå™¨ï¼Ÿ</strong></p><p>@WebFilter(urlPatterns={<strong>&quot;/css/*&quot;</strong>,<strong>&quot;/images/*&quot;</strong>})</p><p>@WebListener</p><p>æ¨èå¯ä»¥è¿™ç§æ–¹å¼ï¼›</p><p>æ‰©å±•ï¼šDispatchServlet å¦‚ä½•æ³¨å†Œè¿›æ¥</p><ul><li>å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®äº† DispatcherServlet å±æ€§ç»‘å®šåˆ° WebMvcPropertiesï¼›å¯¹åº”çš„é…ç½®æ–‡ä»¶é…ç½®é¡¹æ˜¯ <strong>spring.mvcã€‚</strong></li><li>é€šè¿‡ <strong>ServletRegistrationBean</strong> <code>&lt;DispatcherServlet&gt;</code> æŠŠ DispatcherServlet é…ç½®è¿›æ¥ã€‚</li><li>é»˜è®¤æ˜ å°„çš„æ˜¯ / è·¯å¾„ã€‚</li></ul><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007809.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Tomcat-Servletï¼›</p><p>å¤šä¸ªServletéƒ½èƒ½å¤„ç†åˆ°åŒä¸€å±‚è·¯å¾„ï¼Œç²¾ç¡®ä¼˜é€‰åŸåˆ™</p><p>Aï¼š /my/</p><p>Bï¼š /my/1</p><h2 id="_2ã€ä½¿ç”¨registrationbean" tabindex="-1"><a class="header-anchor" href="#_2ã€ä½¿ç”¨registrationbean"><span>2ã€ä½¿ç”¨RegistrationBean</span></a></h2><div class="language-text line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="text" data-title="text" style="--vp-collapsed-lines:10;"><pre><code><span class="line">ServletRegistrationBean`, `FilterRegistrationBean`, and `ServletListenerRegistrationBean</span>
<span class="line">@Configuration</span>
<span class="line">public class MyRegistConfig {</span>
<span class="line"></span>
<span class="line">    @Bean</span>
<span class="line">    public ServletRegistrationBean myServlet(){</span>
<span class="line">        MyServlet myServlet = new MyServlet();</span>
<span class="line"></span>
<span class="line">        return new ServletRegistrationBean(myServlet,&quot;/my&quot;,&quot;/my02&quot;);</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    @Bean</span>
<span class="line">    public FilterRegistrationBean myFilter(){</span>
<span class="line"></span>
<span class="line">        MyFilter myFilter = new MyFilter();</span>
<span class="line">//        return new FilterRegistrationBean(myFilter,myServlet());</span>
<span class="line">        FilterRegistrationBean filterRegistrationBean = new FilterRegistrationBean(myFilter);</span>
<span class="line">        filterRegistrationBean.setUrlPatterns(Arrays.asList(&quot;/my&quot;,&quot;/css/*&quot;));</span>
<span class="line">        return filterRegistrationBean;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    @Bean</span>
<span class="line">    public ServletListenerRegistrationBean myListener(){</span>
<span class="line">        MySwervletContextListener mySwervletContextListener = new MySwervletContextListener();</span>
<span class="line">        return new ServletListenerRegistrationBean(mySwervletContextListener);</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h1 id="_10ã€åµŒå…¥å¼servletå®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_10ã€åµŒå…¥å¼servletå®¹å™¨"><span>10ã€åµŒå…¥å¼Servletå®¹å™¨</span></a></h1><h2 id="_1ã€åˆ‡æ¢åµŒå…¥å¼servletå®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_1ã€åˆ‡æ¢åµŒå…¥å¼servletå®¹å™¨"><span>1ã€åˆ‡æ¢åµŒå…¥å¼Servletå®¹å™¨</span></a></h2><ul><li><p>é»˜è®¤æ”¯æŒçš„webServer</p></li><li><ul><li><code>Tomcat</code>, <code>Jetty</code>, or <code>Undertow</code></li><li><code>ServletWebServerApplicationContext å®¹å™¨å¯åŠ¨å¯»æ‰¾ServletWebServerFactory å¹¶å¼•å¯¼åˆ›å»ºæœåŠ¡å™¨</code></li></ul></li><li><p>åˆ‡æ¢æœåŠ¡å™¨</p></li></ul><figure><img src="https://gitee.com/private_crh/notes/raw/master/typora/202411070007918.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-xml line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="xml" data-title="xml" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-tomcat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><ul><li><p>åŸç†</p></li><li><ul><li>SpringBootåº”ç”¨å¯åŠ¨å‘ç°å½“å‰æ˜¯Webåº”ç”¨ã€‚webåœºæ™¯åŒ…-å¯¼å…¥tomcat</li><li>webåº”ç”¨ä¼šåˆ›å»ºä¸€ä¸ªwebç‰ˆçš„iocå®¹å™¨ <code>ServletWebServerApplicationContext</code></li><li><code>ServletWebServerApplicationContext</code> å¯åŠ¨çš„æ—¶å€™å¯»æ‰¾ <code>**ServletWebServerFactory**``ï¼ˆServlet çš„webæœåŠ¡å™¨å·¥å‚---&gt; Servlet çš„webæœåŠ¡å™¨ï¼‰</code></li><li>SpringBootåº•å±‚é»˜è®¤æœ‰å¾ˆå¤šçš„WebServerå·¥å‚ï¼›<code>TomcatServletWebServerFactory</code>, <code>JettyServletWebServerFactory</code>, or <code>UndertowServletWebServerFactory</code></li><li><code>åº•å±‚ç›´æ¥ä¼šæœ‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ã€‚ServletWebServerFactoryAutoConfiguration</code></li><li><code>ServletWebServerFactoryAutoConfigurationå¯¼å…¥äº†ServletWebServerFactoryConfigurationï¼ˆé…ç½®ç±»ï¼‰</code></li><li><code>ServletWebServerFactoryConfiguration é…ç½®ç±» æ ¹æ®åŠ¨æ€åˆ¤æ–­ç³»ç»Ÿä¸­åˆ°åº•å¯¼å…¥äº†é‚£ä¸ªWebæœåŠ¡å™¨çš„åŒ…ã€‚ï¼ˆé»˜è®¤æ˜¯web-starterå¯¼å…¥tomcatåŒ…ï¼‰ï¼Œå®¹å™¨ä¸­å°±æœ‰ TomcatServletWebServerFactory</code></li><li><code>TomcatServletWebServerFactory åˆ›å»ºå‡ºTomcatæœåŠ¡å™¨å¹¶å¯åŠ¨ï¼›TomcatWebServer çš„æ„é€ å™¨æ‹¥æœ‰åˆå§‹åŒ–æ–¹æ³•initialize---this.tomcat.start();</code></li><li><code>å†…åµŒæœåŠ¡å™¨ï¼Œå°±æ˜¯æ‰‹åŠ¨æŠŠå¯åŠ¨æœåŠ¡å™¨çš„ä»£ç è°ƒç”¨ï¼ˆtomcatæ ¸å¿ƒjaråŒ…å­˜åœ¨ï¼‰</code></li></ul></li><li><p>``</p></li></ul><h2 id="_2ã€å®šåˆ¶servletå®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_2ã€å®šåˆ¶servletå®¹å™¨"><span>2ã€å®šåˆ¶Servletå®¹å™¨</span></a></h2><ul><li><p>å®ç° <strong>WebServerFactoryCu</strong> stomizer <code>&lt;ConfigurableServletWebServerFactory&gt;</code></p></li><li><ul><li>æŠŠé…ç½®æ–‡ä»¶çš„å€¼å’Œ<code>**ServletWebServerFactory è¿›è¡Œç»‘å®š**</code></li></ul></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ <strong>server.xxx</strong></p></li><li><p>ç›´æ¥è‡ªå®šä¹‰ <strong>ConfigurableServletWebServerFactory</strong></p></li></ul><p><strong>xxxxx<strong><strong>Customizer</strong></strong>ï¼šå®šåˆ¶åŒ–å™¨ï¼Œå¯ä»¥æ”¹å˜xxxxçš„é»˜è®¤è§„åˆ™</strong></p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="java" data-title="java" style="--vp-collapsed-lines:10;"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">WebServerFactoryCustomizer</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableServletWebServerFactory</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Component</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomizationBean</span> <span class="token keyword">implements</span> <span class="token class-name">WebServerFactoryCustomizer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigurableServletWebServerFactory</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">customize</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableServletWebServerFactory</span> server<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        server<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h1 id="_11ã€å®šåˆ¶åŒ–åŸç†" tabindex="-1"><a class="header-anchor" href="#_11ã€å®šåˆ¶åŒ–åŸç†"><span>11ã€å®šåˆ¶åŒ–åŸç†</span></a></h1><h2 id="_1ã€å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_1ã€å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼"><span>1ã€å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼</span></a></h2><ul><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼›</li><li><strong>xxxxxCustomizerï¼›</strong></li><li><strong>ç¼–å†™è‡ªå®šä¹‰çš„é…ç½®ç±» xxxConfigurationï¼›+</strong> <strong>@Beanæ›¿æ¢ã€å¢åŠ å®¹å™¨ä¸­é»˜è®¤ç»„ä»¶ï¼›è§†å›¾è§£æå™¨</strong></li><li><strong>Webåº”ç”¨ ç¼–å†™ä¸€ä¸ªé…ç½®ç±»å®ç°</strong> <strong>WebMvcConfigurer å³å¯å®šåˆ¶åŒ–webåŠŸèƒ½ï¼›+ @Beanç»™å®¹å™¨ä¸­å†æ‰©å±•ä¸€äº›ç»„ä»¶</strong></li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Configuration</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminWebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>@EnableWebMvc + WebMvcConfigurer â€”â€” @Bean å¯ä»¥å…¨é¢æ¥ç®¡SpringMVCï¼Œæ‰€æœ‰è§„åˆ™å…¨éƒ¨è‡ªå·±é‡æ–°é…ç½®ï¼› å®ç°å®šåˆ¶å’Œæ‰©å±•åŠŸèƒ½</p></li><li><ul><li>åŸç†</li><li>1ã€WebMvcAutoConfiguration é»˜è®¤çš„SpringMVCçš„è‡ªåŠ¨é…ç½®åŠŸèƒ½ç±»ã€‚é™æ€èµ„æºã€æ¬¢è¿é¡µ.....</li><li>2ã€ä¸€æ—¦ä½¿ç”¨ @EnableWebMvc ã€ã€‚ä¼š @Import(DelegatingWebMvcConfiguration.<strong>class</strong>)</li><li>3ã€<strong>DelegatingWebMvcConfiguration</strong> çš„ ä½œç”¨ï¼Œåªä¿è¯SpringMVCæœ€åŸºæœ¬çš„ä½¿ç”¨</li></ul></li><li><ul><li><ul><li>æŠŠæ‰€æœ‰ç³»ç»Ÿä¸­çš„ WebMvcConfigurer æ‹¿è¿‡æ¥ã€‚æ‰€æœ‰åŠŸèƒ½çš„å®šåˆ¶éƒ½æ˜¯è¿™äº› WebMvcConfigurer åˆèµ·æ¥ä¸€èµ·ç”Ÿæ•ˆ</li><li>è‡ªåŠ¨é…ç½®äº†ä¸€äº›éå¸¸åº•å±‚çš„ç»„ä»¶ã€‚<strong>RequestMappingHandlerMapping</strong>ã€è¿™äº›ç»„ä»¶ä¾èµ–çš„ç»„ä»¶éƒ½æ˜¯ä»å®¹å™¨ä¸­è·å–</li><li><strong>public class</strong> DelegatingWebMvcConfiguration <strong>extends</strong> <strong>WebMvcConfigurationSupport</strong></li></ul></li></ul></li><li><ul><li>4ã€<strong>WebMvcAutoConfiguration</strong> é‡Œé¢çš„é…ç½®è¦èƒ½ç”Ÿæ•ˆ å¿…é¡» @ConditionalOnMissingBean(<strong>WebMvcConfigurationSupport</strong>.<strong>class</strong>)</li><li>5ã€@EnableWebMvc å¯¼è‡´äº† <strong>WebMvcAutoConfiguration æ²¡æœ‰ç”Ÿæ•ˆã€‚</strong></li></ul></li><li><p>... ...</p></li></ul><h2 id="_2ã€åŸç†åˆ†æå¥—è·¯" tabindex="-1"><a class="header-anchor" href="#_2ã€åŸç†åˆ†æå¥—è·¯"><span>2ã€åŸç†åˆ†æå¥—è·¯</span></a></h2><p><strong>åœºæ™¯starter</strong> <strong>- xxxxAutoConfiguration - å¯¼å…¥xxxç»„ä»¶ - ç»‘å®šxxxProperties --</strong> <strong>ç»‘å®šé…ç½®æ–‡ä»¶é¡¹</strong></p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/codenotes/back/spring/springboot/3%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html" aria-label="é…ç½®æ–‡ä»¶"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->é…ç½®æ–‡ä»¶</div></a><a class="route-link auto-link next" href="/codenotes/back/spring/springboot/5%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE.html" aria-label="æ•°æ®è®¿é—®"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">æ•°æ®è®¿é—®<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">Ahzyã®å­¦ä¹ ç¬”è®°</div><div class="vp-copyright">Copyright Â© 2024 Ahzy </div></footer></div><!--]--><!--[--><!----><!----><!----><!--[--><!--]--><!----><!----><!----><!----><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-eWV4nnR8.js" defer></script>
  </body>
</html>
